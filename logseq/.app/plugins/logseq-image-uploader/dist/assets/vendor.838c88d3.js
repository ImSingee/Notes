var On={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(r,e){(function(t,n){r.exports=n()})(self,function(){return(()=>{var t={227:(o,h,u)=>{var E=u(155);h.formatArgs=function(y){if(y[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+y[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;const O="color: "+this.color;y.splice(1,0,O,"color: inherit");let f=0,v=0;y[0].replace(/%[a-zA-Z%]/g,T=>{T!=="%%"&&(f++,T==="%c"&&(v=f))}),y.splice(v,0,O)},h.save=function(y){try{y?h.storage.setItem("debug",y):h.storage.removeItem("debug")}catch{}},h.load=function(){let y;try{y=h.storage.getItem("debug")}catch{}return!y&&E!==void 0&&"env"in E&&(y=E.env.DEBUG),y},h.useColors=function(){return!(typeof window=="undefined"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator=="undefined"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},h.storage=function(){try{return localStorage}catch{}}(),h.destroy=(()=>{let y=!1;return()=>{y||(y=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),h.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],h.log=console.debug||console.log||(()=>{}),o.exports=u(447)(h);const{formatters:g}=o.exports;g.j=function(y){try{return JSON.stringify(y)}catch(O){return"[UnexpectedJSONParseError]: "+O.message}}},447:(o,h,u)=>{o.exports=function(E){function g(f){let v,T,S,X=null;function H(...G){if(!H.enabled)return;const B=H,N=Number(new Date),k=N-(v||N);B.diff=k,B.prev=v,B.curr=N,v=N,G[0]=g.coerce(G[0]),typeof G[0]!="string"&&G.unshift("%O");let c=0;G[0]=G[0].replace(/%([a-zA-Z%])/g,(p,w)=>{if(p==="%%")return"%";c++;const L=g.formatters[w];if(typeof L=="function"){const z=G[c];p=L.call(B,z),G.splice(c,1),c--}return p}),g.formatArgs.call(B,G),(B.log||g.log).apply(B,G)}return H.namespace=f,H.useColors=g.useColors(),H.color=g.selectColor(f),H.extend=y,H.destroy=g.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:()=>X!==null?X:(T!==g.namespaces&&(T=g.namespaces,S=g.enabled(f)),S),set:G=>{X=G}}),typeof g.init=="function"&&g.init(H),H}function y(f,v){const T=g(this.namespace+(v===void 0?":":v)+f);return T.log=this.log,T}function O(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}return g.debug=g,g.default=g,g.coerce=function(f){return f instanceof Error?f.stack||f.message:f},g.disable=function(){const f=[...g.names.map(O),...g.skips.map(O).map(v=>"-"+v)].join(",");return g.enable(""),f},g.enable=function(f){let v;g.save(f),g.namespaces=f,g.names=[],g.skips=[];const T=(typeof f=="string"?f:"").split(/[\s,]+/),S=T.length;for(v=0;v<S;v++)T[v]&&((f=T[v].replace(/\*/g,".*?"))[0]==="-"?g.skips.push(new RegExp("^"+f.substr(1)+"$")):g.names.push(new RegExp("^"+f+"$")))},g.enabled=function(f){if(f[f.length-1]==="*")return!0;let v,T;for(v=0,T=g.skips.length;v<T;v++)if(g.skips[v].test(f))return!1;for(v=0,T=g.names.length;v<T;v++)if(g.names[v].test(f))return!0;return!1},g.humanize=u(824),g.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(E).forEach(f=>{g[f]=E[f]}),g.names=[],g.skips=[],g.formatters={},g.selectColor=function(f){let v=0;for(let T=0;T<f.length;T++)v=(v<<5)-v+f.charCodeAt(T),v|=0;return g.colors[Math.abs(v)%g.colors.length]},g.enable(g.load()),g}},856:function(o){o.exports=function(){var h=Object.hasOwnProperty,u=Object.setPrototypeOf,E=Object.isFrozen,g=Object.getPrototypeOf,y=Object.getOwnPropertyDescriptor,O=Object.freeze,f=Object.seal,v=Object.create,T=typeof Reflect!="undefined"&&Reflect,S=T.apply,X=T.construct;S||(S=function(C,R,b){return C.apply(R,b)}),O||(O=function(C){return C}),f||(f=function(C){return C}),X||(X=function(C,R){return new(Function.prototype.bind.apply(C,[null].concat(function(b){if(Array.isArray(b)){for(var U=0,V=Array(b.length);U<b.length;U++)V[U]=b[U];return V}return Array.from(b)}(R))))});var H,G=q(Array.prototype.forEach),B=q(Array.prototype.pop),N=q(Array.prototype.push),k=q(String.prototype.toLowerCase),c=q(String.prototype.match),p=q(String.prototype.replace),w=q(String.prototype.indexOf),L=q(String.prototype.trim),z=q(RegExp.prototype.test),J=(H=TypeError,function(){for(var C=arguments.length,R=Array(C),b=0;b<C;b++)R[b]=arguments[b];return X(H,R)});function q(C){return function(R){for(var b=arguments.length,U=Array(b>1?b-1:0),V=1;V<b;V++)U[V-1]=arguments[V];return S(C,R,U)}}function P(C,R){u&&u(C,null);for(var b=R.length;b--;){var U=R[b];if(typeof U=="string"){var V=k(U);V!==U&&(E(R)||(R[b]=V),U=V)}C[U]=!0}return C}function ie(C){var R=v(null),b=void 0;for(b in C)S(h,C,[b])&&(R[b]=C[b]);return R}function re(C,R){for(;C!==null;){var b=y(C,R);if(b){if(b.get)return q(b.get);if(typeof b.value=="function")return q(b.value)}C=g(C)}return function(U){return console.warn("fallback value for",U),null}}var Te=O(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ne=O(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),m=O(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),x=O(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=O(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ne=O(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ae=O(["#text"]),Q=O(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Z=O(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ee=O(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),le=O(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ve=f(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Ae=f(/<%[\s\S]*|[\s\S]*%>/gm),Ie=f(/^data-[\-\w.\u00B7-\uFFFF]/),_=f(/^aria-[\-\w]+$/),s=f(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),d=f(/^(?:\w+script|data):/i),$=f(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C};function A(C){if(Array.isArray(C)){for(var R=0,b=Array(C.length);R<C.length;R++)b[R]=C[R];return b}return Array.from(C)}var D=function(){return typeof window=="undefined"?null:window},W=function(C,R){if((C===void 0?"undefined":I(C))!=="object"||typeof C.createPolicy!="function")return null;var b=null,U="data-tt-policy-suffix";R.currentScript&&R.currentScript.hasAttribute(U)&&(b=R.currentScript.getAttribute(U));var V="dompurify"+(b?"#"+b:"");try{return C.createPolicy(V,{createHTML:function(ye){return ye}})}catch{return console.warn("TrustedTypes policy "+V+" could not be created."),null}};return function C(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D(),b=function(l){return C(l)};if(b.version="2.3.1",b.removed=[],!R||!R.document||R.document.nodeType!==9)return b.isSupported=!1,b;var U=R.document,V=R.document,ye=R.DocumentFragment,Ft=R.HTMLTemplateElement,Me=R.Node,et=R.Element,tt=R.NodeFilter,ze=R.NamedNodeMap,Dt=ze===void 0?R.NamedNodeMap||R.MozNamedAttrMap:ze,Fe=R.Text,ht=R.Comment,jt=R.DOMParser,ft=R.trustedTypes,He=et.prototype,pt=re(He,"cloneNode"),Pt=re(He,"nextSibling"),dt=re(He,"childNodes"),rt=re(He,"parentNode");if(typeof Ft=="function"){var De=V.createElement("template");De.content&&De.content.ownerDocument&&(V=De.content.ownerDocument)}var Ee=W(ft,U),Xe=Ee&&vt?Ee.createHTML(""):"",mt=V,Mt=mt.implementation,mn=mt.createNodeIterator,gn=mt.createDocumentFragment,vn=mt.getElementsByTagName,yn=U.importNode,mr={};try{mr=ie(V).documentMode?V.documentMode:{}}catch{}var Oe={};b.isSupported=typeof rt=="function"&&Mt&&Mt.createHTMLDocument!==void 0&&mr!==9;var Ut=ve,kt=Ae,En=Ie,bn=_,wn=d,gr=$,Gt=s,he=null,vr=P({},[].concat(A(Te),A(Ne),A(m),A(M),A(ae))),fe=null,yr=P({},[].concat(A(Q),A(Z),A(ee),A(le))),zt=null,Ht=null,Er=!0,Xt=!0,br=!1,Be=!1,Ve=!1,Bt=!1,Vt=!1,qe=!1,gt=!1,wr=!0,vt=!1,$r=!0,qt=!0,nt=!1,We={},Je=null,Sr=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),_r=null,Tr=P({},["audio","video","img","source","image","track"]),Wt=null,Ar=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Jt="http://www.w3.org/1998/Math/MathML",Yt="http://www.w3.org/2000/svg",je="http://www.w3.org/1999/xhtml",yt=je,Or=!1,Ye=null,$n=V.createElement("form"),Zt=function(l){Ye&&Ye===l||(l&&(l===void 0?"undefined":I(l))==="object"||(l={}),l=ie(l),he="ALLOWED_TAGS"in l?P({},l.ALLOWED_TAGS):vr,fe="ALLOWED_ATTR"in l?P({},l.ALLOWED_ATTR):yr,Wt="ADD_URI_SAFE_ATTR"in l?P(ie(Ar),l.ADD_URI_SAFE_ATTR):Ar,_r="ADD_DATA_URI_TAGS"in l?P(ie(Tr),l.ADD_DATA_URI_TAGS):Tr,Je="FORBID_CONTENTS"in l?P({},l.FORBID_CONTENTS):Sr,zt="FORBID_TAGS"in l?P({},l.FORBID_TAGS):{},Ht="FORBID_ATTR"in l?P({},l.FORBID_ATTR):{},We="USE_PROFILES"in l&&l.USE_PROFILES,Er=l.ALLOW_ARIA_ATTR!==!1,Xt=l.ALLOW_DATA_ATTR!==!1,br=l.ALLOW_UNKNOWN_PROTOCOLS||!1,Be=l.SAFE_FOR_TEMPLATES||!1,Ve=l.WHOLE_DOCUMENT||!1,qe=l.RETURN_DOM||!1,gt=l.RETURN_DOM_FRAGMENT||!1,wr=l.RETURN_DOM_IMPORT!==!1,vt=l.RETURN_TRUSTED_TYPE||!1,Vt=l.FORCE_BODY||!1,$r=l.SANITIZE_DOM!==!1,qt=l.KEEP_CONTENT!==!1,nt=l.IN_PLACE||!1,Gt=l.ALLOWED_URI_REGEXP||Gt,yt=l.NAMESPACE||je,Be&&(Xt=!1),gt&&(qe=!0),We&&(he=P({},[].concat(A(ae))),fe=[],We.html===!0&&(P(he,Te),P(fe,Q)),We.svg===!0&&(P(he,Ne),P(fe,Z),P(fe,le)),We.svgFilters===!0&&(P(he,m),P(fe,Z),P(fe,le)),We.mathMl===!0&&(P(he,M),P(fe,ee),P(fe,le))),l.ADD_TAGS&&(he===vr&&(he=ie(he)),P(he,l.ADD_TAGS)),l.ADD_ATTR&&(fe===yr&&(fe=ie(fe)),P(fe,l.ADD_ATTR)),l.ADD_URI_SAFE_ATTR&&P(Wt,l.ADD_URI_SAFE_ATTR),l.FORBID_CONTENTS&&(Je===Sr&&(Je=ie(Je)),P(Je,l.FORBID_CONTENTS)),qt&&(he["#text"]=!0),Ve&&P(he,["html","head","body"]),he.table&&(P(he,["tbody"]),delete zt.tbody),O&&O(l),Ye=l)},Ir=P({},["mi","mo","mn","ms","mtext"]),Rr=P({},["foreignobject","desc","title","annotation-xml"]),Et=P({},Ne);P(Et,m),P(Et,x);var Kt=P({},M);P(Kt,ne);var Sn=function(l){var j=rt(l);j&&j.tagName||(j={namespaceURI:je,tagName:"template"});var F=k(l.tagName),K=k(j.tagName);if(l.namespaceURI===Yt)return j.namespaceURI===je?F==="svg":j.namespaceURI===Jt?F==="svg"&&(K==="annotation-xml"||Ir[K]):Boolean(Et[F]);if(l.namespaceURI===Jt)return j.namespaceURI===je?F==="math":j.namespaceURI===Yt?F==="math"&&Rr[K]:Boolean(Kt[F]);if(l.namespaceURI===je){if(j.namespaceURI===Yt&&!Rr[K]||j.namespaceURI===Jt&&!Ir[K])return!1;var te=P({},["title","style","font","a","script"]);return!Kt[F]&&(te[F]||!Et[F])}return!1},Re=function(l){N(b.removed,{element:l});try{l.parentNode.removeChild(l)}catch{try{l.outerHTML=Xe}catch{l.remove()}}},Cr=function(l,j){try{N(b.removed,{attribute:j.getAttributeNode(l),from:j})}catch{N(b.removed,{attribute:null,from:j})}if(j.removeAttribute(l),l==="is"&&!fe[l])if(qe||gt)try{Re(j)}catch{}else try{j.setAttribute(l,"")}catch{}},xr=function(l){var j=void 0,F=void 0;if(Vt)l="<remove></remove>"+l;else{var K=c(l,/^[\r\n\t ]+/);F=K&&K[0]}var te=Ee?Ee.createHTML(l):l;if(yt===je)try{j=new jt().parseFromString(te,"text/html")}catch{}if(!j||!j.documentElement){j=Mt.createDocument(yt,"template",null);try{j.documentElement.innerHTML=Or?"":te}catch{}}var de=j.body||j.documentElement;return l&&F&&de.insertBefore(V.createTextNode(F),de.childNodes[0]||null),yt===je?vn.call(j,Ve?"html":"body")[0]:Ve?j.documentElement:de},Lr=function(l){return mn.call(l.ownerDocument||l,l,tt.SHOW_ELEMENT|tt.SHOW_COMMENT|tt.SHOW_TEXT,null,!1)},_n=function(l){return!(l instanceof Fe||l instanceof ht||typeof l.nodeName=="string"&&typeof l.textContent=="string"&&typeof l.removeChild=="function"&&l.attributes instanceof Dt&&typeof l.removeAttribute=="function"&&typeof l.setAttribute=="function"&&typeof l.namespaceURI=="string"&&typeof l.insertBefore=="function")},st=function(l){return(Me===void 0?"undefined":I(Me))==="object"?l instanceof Me:l&&(l===void 0?"undefined":I(l))==="object"&&typeof l.nodeType=="number"&&typeof l.nodeName=="string"},Ce=function(l,j,F){Oe[l]&&G(Oe[l],function(K){K.call(b,j,F,Ye)})},Nr=function(l){var j=void 0;if(Ce("beforeSanitizeElements",l,null),_n(l)||c(l.nodeName,/[\u0080-\uFFFF]/))return Re(l),!0;var F=k(l.nodeName);if(Ce("uponSanitizeElement",l,{tagName:F,allowedTags:he}),!st(l.firstElementChild)&&(!st(l.content)||!st(l.content.firstElementChild))&&z(/<[/\w]/g,l.innerHTML)&&z(/<[/\w]/g,l.textContent)||F==="select"&&z(/<template/i,l.innerHTML))return Re(l),!0;if(!he[F]||zt[F]){if(qt&&!Je[F]){var K=rt(l)||l.parentNode,te=dt(l)||l.childNodes;if(te&&K)for(var de=te.length-1;de>=0;--de)K.insertBefore(pt(te[de],!0),Pt(l))}return Re(l),!0}return l instanceof et&&!Sn(l)?(Re(l),!0):F!=="noscript"&&F!=="noembed"||!z(/<\/no(script|embed)/i,l.innerHTML)?(Be&&l.nodeType===3&&(j=l.textContent,j=p(j,Ut," "),j=p(j,kt," "),l.textContent!==j&&(N(b.removed,{element:l.cloneNode()}),l.textContent=j)),Ce("afterSanitizeElements",l,null),!1):(Re(l),!0)},Fr=function(l,j,F){if($r&&(j==="id"||j==="name")&&(F in V||F in $n))return!1;if(!(Xt&&!Ht[j]&&z(En,j))){if(!(Er&&z(bn,j))){if(!fe[j]||Ht[j])return!1;if(!Wt[j]){if(!z(Gt,p(F,gr,""))){if((j!=="src"&&j!=="xlink:href"&&j!=="href"||l==="script"||w(F,"data:")!==0||!_r[l])&&!(br&&!z(wn,p(F,gr,"")))){if(F)return!1}}}}}return!0},Dr=function(l){var j=void 0,F=void 0,K=void 0,te=void 0;Ce("beforeSanitizeAttributes",l,null);var de=l.attributes;if(de){var ce={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:fe};for(te=de.length;te--;){var bt=j=de[te],be=bt.name,jr=bt.namespaceURI;if(F=L(j.value),K=k(be),ce.attrName=K,ce.attrValue=F,ce.keepAttr=!0,ce.forceKeepAttr=void 0,Ce("uponSanitizeAttribute",l,ce),F=ce.attrValue,!ce.forceKeepAttr&&(Cr(be,l),ce.keepAttr))if(z(/\/>/i,F))Cr(be,l);else{Be&&(F=p(F,Ut," "),F=p(F,kt," "));var An=l.nodeName.toLowerCase();if(Fr(An,K,F))try{jr?l.setAttributeNS(jr,be,F):l.setAttribute(be,F),B(b.removed)}catch{}}}Ce("afterSanitizeAttributes",l,null)}},Tn=function l(j){var F=void 0,K=Lr(j);for(Ce("beforeSanitizeShadowDOM",j,null);F=K.nextNode();)Ce("uponSanitizeShadowNode",F,null),Nr(F)||(F.content instanceof ye&&l(F.content),Dr(F));Ce("afterSanitizeShadowDOM",j,null)};return b.sanitize=function(l,j){var F=void 0,K=void 0,te=void 0,de=void 0,ce=void 0;if((Or=!l)&&(l="<!-->"),typeof l!="string"&&!st(l)){if(typeof l.toString!="function")throw J("toString is not a function");if(typeof(l=l.toString())!="string")throw J("dirty is not a string, aborting")}if(!b.isSupported){if(I(R.toStaticHTML)==="object"||typeof R.toStaticHTML=="function"){if(typeof l=="string")return R.toStaticHTML(l);if(st(l))return R.toStaticHTML(l.outerHTML)}return l}if(Bt||Zt(j),b.removed=[],typeof l=="string"&&(nt=!1),!nt)if(l instanceof Me)(K=(F=xr("<!---->")).ownerDocument.importNode(l,!0)).nodeType===1&&K.nodeName==="BODY"||K.nodeName==="HTML"?F=K:F.appendChild(K);else{if(!qe&&!Be&&!Ve&&l.indexOf("<")===-1)return Ee&&vt?Ee.createHTML(l):l;if(!(F=xr(l)))return qe?null:Xe}F&&Vt&&Re(F.firstChild);for(var bt=Lr(nt?l:F);te=bt.nextNode();)te.nodeType===3&&te===de||Nr(te)||(te.content instanceof ye&&Tn(te.content),Dr(te),de=te);if(de=null,nt)return l;if(qe){if(gt)for(ce=gn.call(F.ownerDocument);F.firstChild;)ce.appendChild(F.firstChild);else ce=F;return wr&&(ce=yn.call(U,ce,!0)),ce}var be=Ve?F.outerHTML:F.innerHTML;return Be&&(be=p(be,Ut," "),be=p(be,kt," ")),Ee&&vt?Ee.createHTML(be):be},b.setConfig=function(l){Zt(l),Bt=!0},b.clearConfig=function(){Ye=null,Bt=!1},b.isValidAttribute=function(l,j,F){Ye||Zt({});var K=k(l),te=k(j);return Fr(K,te,F)},b.addHook=function(l,j){typeof j=="function"&&(Oe[l]=Oe[l]||[],N(Oe[l],j))},b.removeHook=function(l){Oe[l]&&B(Oe[l])},b.removeHooks=function(l){Oe[l]&&(Oe[l]=[])},b.removeAllHooks=function(){Oe={}},b}()}()},729:o=>{var h=Object.prototype.hasOwnProperty,u="~";function E(){}function g(v,T,S){this.fn=v,this.context=T,this.once=S||!1}function y(v,T,S,X,H){if(typeof S!="function")throw new TypeError("The listener must be a function");var G=new g(S,X||v,H),B=u?u+T:T;return v._events[B]?v._events[B].fn?v._events[B]=[v._events[B],G]:v._events[B].push(G):(v._events[B]=G,v._eventsCount++),v}function O(v,T){--v._eventsCount==0?v._events=new E:delete v._events[T]}function f(){this._events=new E,this._eventsCount=0}Object.create&&(E.prototype=Object.create(null),new E().__proto__||(u=!1)),f.prototype.eventNames=function(){var v,T,S=[];if(this._eventsCount===0)return S;for(T in v=this._events)h.call(v,T)&&S.push(u?T.slice(1):T);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(v)):S},f.prototype.listeners=function(v){var T=u?u+v:v,S=this._events[T];if(!S)return[];if(S.fn)return[S.fn];for(var X=0,H=S.length,G=new Array(H);X<H;X++)G[X]=S[X].fn;return G},f.prototype.listenerCount=function(v){var T=u?u+v:v,S=this._events[T];return S?S.fn?1:S.length:0},f.prototype.emit=function(v,T,S,X,H,G){var B=u?u+v:v;if(!this._events[B])return!1;var N,k,c=this._events[B],p=arguments.length;if(c.fn){switch(c.once&&this.removeListener(v,c.fn,void 0,!0),p){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,T),!0;case 3:return c.fn.call(c.context,T,S),!0;case 4:return c.fn.call(c.context,T,S,X),!0;case 5:return c.fn.call(c.context,T,S,X,H),!0;case 6:return c.fn.call(c.context,T,S,X,H,G),!0}for(k=1,N=new Array(p-1);k<p;k++)N[k-1]=arguments[k];c.fn.apply(c.context,N)}else{var w,L=c.length;for(k=0;k<L;k++)switch(c[k].once&&this.removeListener(v,c[k].fn,void 0,!0),p){case 1:c[k].fn.call(c[k].context);break;case 2:c[k].fn.call(c[k].context,T);break;case 3:c[k].fn.call(c[k].context,T,S);break;case 4:c[k].fn.call(c[k].context,T,S,X);break;default:if(!N)for(w=1,N=new Array(p-1);w<p;w++)N[w-1]=arguments[w];c[k].fn.apply(c[k].context,N)}}return!0},f.prototype.on=function(v,T,S){return y(this,v,T,S,!1)},f.prototype.once=function(v,T,S){return y(this,v,T,S,!0)},f.prototype.removeListener=function(v,T,S,X){var H=u?u+v:v;if(!this._events[H])return this;if(!T)return O(this,H),this;var G=this._events[H];if(G.fn)G.fn!==T||X&&!G.once||S&&G.context!==S||O(this,H);else{for(var B=0,N=[],k=G.length;B<k;B++)(G[B].fn!==T||X&&!G[B].once||S&&G[B].context!==S)&&N.push(G[B]);N.length?this._events[H]=N.length===1?N[0]:N:O(this,H)}return this},f.prototype.removeAllListeners=function(v){var T;return v?(T=u?u+v:v,this._events[T]&&O(this,T)):(this._events=new E,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=u,f.EventEmitter=f,o.exports=f},717:o=>{typeof Object.create=="function"?o.exports=function(h,u){h.super_=u,h.prototype=Object.create(u.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}})}:o.exports=function(h,u){h.super_=u;var E=function(){};E.prototype=u.prototype,h.prototype=new E,h.prototype.constructor=h}},824:o=>{var h=1e3,u=60*h,E=60*u,g=24*E;function y(O,f,v,T){var S=f>=1.5*v;return Math.round(O/v)+" "+T+(S?"s":"")}o.exports=function(O,f){f=f||{};var v,T,S=typeof O;if(S==="string"&&O.length>0)return function(X){if(!((X=String(X)).length>100)){var H=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(X);if(H){var G=parseFloat(H[1]);switch((H[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*G;case"weeks":case"week":case"w":return 6048e5*G;case"days":case"day":case"d":return G*g;case"hours":case"hour":case"hrs":case"hr":case"h":return G*E;case"minutes":case"minute":case"mins":case"min":case"m":return G*u;case"seconds":case"second":case"secs":case"sec":case"s":return G*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return G;default:return}}}}(O);if(S==="number"&&isFinite(O))return f.long?(v=O,(T=Math.abs(v))>=g?y(v,T,g,"day"):T>=E?y(v,T,E,"hour"):T>=u?y(v,T,u,"minute"):T>=h?y(v,T,h,"second"):v+" ms"):function(X){var H=Math.abs(X);return H>=g?Math.round(X/g)+"d":H>=E?Math.round(X/E)+"h":H>=u?Math.round(X/u)+"m":H>=h?Math.round(X/h)+"s":X+"ms"}(O);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(O))}},520:(o,h,u)=>{var E=u(155),g=E.platform==="win32",y=u(539);function O(c,p){for(var w=[],L=0;L<c.length;L++){var z=c[L];z&&z!=="."&&(z===".."?w.length&&w[w.length-1]!==".."?w.pop():p&&w.push(".."):w.push(z))}return w}function f(c){for(var p=c.length-1,w=0;w<=p&&!c[w];w++);for(var L=p;L>=0&&!c[L];L--);return w===0&&L===p?c:w>L?[]:c.slice(w,L+1)}var v=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,T=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,S={};function X(c){var p=v.exec(c),w=(p[1]||"")+(p[2]||""),L=p[3]||"",z=T.exec(L);return[w,z[1],z[2],z[3]]}function H(c){var p=v.exec(c),w=p[1]||"",L=!!w&&w[1]!==":";return{device:w,isUnc:L,isAbsolute:L||!!p[2],tail:p[3]}}function G(c){return"\\\\"+c.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}S.resolve=function(){for(var c="",p="",w=!1,L=arguments.length-1;L>=-1;L--){var z;if(L>=0?z=arguments[L]:c?(z=E.env["="+c])&&z.substr(0,3).toLowerCase()===c.toLowerCase()+"\\"||(z=c+"\\"):z=E.cwd(),!y.isString(z))throw new TypeError("Arguments to path.resolve must be strings");if(z){var J=H(z),q=J.device,P=J.isUnc,ie=J.isAbsolute,re=J.tail;if((!q||!c||q.toLowerCase()===c.toLowerCase())&&(c||(c=q),w||(p=re+"\\"+p,w=ie),c&&w))break}}return P&&(c=G(c)),c+(w?"\\":"")+(p=O(p.split(/[\\\/]+/),!w).join("\\"))||"."},S.normalize=function(c){var p=H(c),w=p.device,L=p.isUnc,z=p.isAbsolute,J=p.tail,q=/[\\\/]$/.test(J);return(J=O(J.split(/[\\\/]+/),!z).join("\\"))||z||(J="."),J&&q&&(J+="\\"),L&&(w=G(w)),w+(z?"\\":"")+J},S.isAbsolute=function(c){return H(c).isAbsolute},S.join=function(){for(var c=[],p=0;p<arguments.length;p++){var w=arguments[p];if(!y.isString(w))throw new TypeError("Arguments to path.join must be strings");w&&c.push(w)}var L=c.join("\\");return/^[\\\/]{2}[^\\\/]/.test(c[0])||(L=L.replace(/^[\\\/]{2,}/,"\\")),S.normalize(L)},S.relative=function(c,p){c=S.resolve(c),p=S.resolve(p);for(var w=c.toLowerCase(),L=p.toLowerCase(),z=f(p.split("\\")),J=f(w.split("\\")),q=f(L.split("\\")),P=Math.min(J.length,q.length),ie=P,re=0;re<P;re++)if(J[re]!==q[re]){ie=re;break}if(ie==0)return p;var Te=[];for(re=ie;re<J.length;re++)Te.push("..");return(Te=Te.concat(z.slice(ie))).join("\\")},S._makeLong=function(c){if(!y.isString(c))return c;if(!c)return"";var p=S.resolve(c);return/^[a-zA-Z]\:\\/.test(p)?"\\\\?\\"+p:/^\\\\[^?.]/.test(p)?"\\\\?\\UNC\\"+p.substring(2):c},S.dirname=function(c){var p=X(c),w=p[0],L=p[1];return w||L?(L&&(L=L.substr(0,L.length-1)),w+L):"."},S.basename=function(c,p){var w=X(c)[2];return p&&w.substr(-1*p.length)===p&&(w=w.substr(0,w.length-p.length)),w},S.extname=function(c){return X(c)[3]},S.format=function(c){if(!y.isObject(c))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof c);var p=c.root||"";if(!y.isString(p))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof c.root);var w=c.dir,L=c.base||"";return w?w[w.length-1]===S.sep?w+L:w+S.sep+L:L},S.parse=function(c){if(!y.isString(c))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof c);var p=X(c);if(!p||p.length!==4)throw new TypeError("Invalid path '"+c+"'");return{root:p[0],dir:p[0]+p[1].slice(0,-1),base:p[2],ext:p[3],name:p[2].slice(0,p[2].length-p[3].length)}},S.sep="\\",S.delimiter=";";var B=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,N={};function k(c){return B.exec(c).slice(1)}N.resolve=function(){for(var c="",p=!1,w=arguments.length-1;w>=-1&&!p;w--){var L=w>=0?arguments[w]:E.cwd();if(!y.isString(L))throw new TypeError("Arguments to path.resolve must be strings");L&&(c=L+"/"+c,p=L[0]==="/")}return(p?"/":"")+(c=O(c.split("/"),!p).join("/"))||"."},N.normalize=function(c){var p=N.isAbsolute(c),w=c&&c[c.length-1]==="/";return(c=O(c.split("/"),!p).join("/"))||p||(c="."),c&&w&&(c+="/"),(p?"/":"")+c},N.isAbsolute=function(c){return c.charAt(0)==="/"},N.join=function(){for(var c="",p=0;p<arguments.length;p++){var w=arguments[p];if(!y.isString(w))throw new TypeError("Arguments to path.join must be strings");w&&(c+=c?"/"+w:w)}return N.normalize(c)},N.relative=function(c,p){c=N.resolve(c).substr(1),p=N.resolve(p).substr(1);for(var w=f(c.split("/")),L=f(p.split("/")),z=Math.min(w.length,L.length),J=z,q=0;q<z;q++)if(w[q]!==L[q]){J=q;break}var P=[];for(q=J;q<w.length;q++)P.push("..");return(P=P.concat(L.slice(J))).join("/")},N._makeLong=function(c){return c},N.dirname=function(c){var p=k(c),w=p[0],L=p[1];return w||L?(L&&(L=L.substr(0,L.length-1)),w+L):"."},N.basename=function(c,p){var w=k(c)[2];return p&&w.substr(-1*p.length)===p&&(w=w.substr(0,w.length-p.length)),w},N.extname=function(c){return k(c)[3]},N.format=function(c){if(!y.isObject(c))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof c);var p=c.root||"";if(!y.isString(p))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof c.root);return(c.dir?c.dir+N.sep:"")+(c.base||"")},N.parse=function(c){if(!y.isString(c))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof c);var p=k(c);if(!p||p.length!==4)throw new TypeError("Invalid path '"+c+"'");return p[1]=p[1]||"",p[2]=p[2]||"",p[3]=p[3]||"",{root:p[0],dir:p[0]+p[1].slice(0,-1),base:p[2],ext:p[3],name:p[2].slice(0,p[2].length-p[3].length)}},N.sep="/",N.delimiter=":",o.exports=g?S:N,o.exports.posix=N,o.exports.win32=S},155:o=>{var h,u,E=o.exports={};function g(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}function O(N){if(h===setTimeout)return setTimeout(N,0);if((h===g||!h)&&setTimeout)return h=setTimeout,setTimeout(N,0);try{return h(N,0)}catch{try{return h.call(null,N,0)}catch{return h.call(this,N,0)}}}(function(){try{h=typeof setTimeout=="function"?setTimeout:g}catch{h=g}try{u=typeof clearTimeout=="function"?clearTimeout:y}catch{u=y}})();var f,v=[],T=!1,S=-1;function X(){T&&f&&(T=!1,f.length?v=f.concat(v):S=-1,v.length&&H())}function H(){if(!T){var N=O(X);T=!0;for(var k=v.length;k;){for(f=v,v=[];++S<k;)f&&f[S].run();S=-1,k=v.length}f=null,T=!1,function(c){if(u===clearTimeout)return clearTimeout(c);if((u===y||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(c);try{u(c)}catch{try{return u.call(null,c)}catch{return u.call(this,c)}}}(N)}}function G(N,k){this.fun=N,this.array=k}function B(){}E.nextTick=function(N){var k=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)k[c-1]=arguments[c];v.push(new G(N,k)),v.length!==1||T||O(H)},G.prototype.run=function(){this.fun.apply(null,this.array)},E.title="browser",E.browser=!0,E.env={},E.argv=[],E.version="",E.versions={},E.on=B,E.addListener=B,E.once=B,E.off=B,E.removeListener=B,E.removeAllListeners=B,E.emit=B,E.prependListener=B,E.prependOnceListener=B,E.listeners=function(N){return[]},E.binding=function(N){throw new Error("process.binding is not supported")},E.cwd=function(){return"/"},E.chdir=function(N){throw new Error("process.chdir is not supported")},E.umask=function(){return 0}},384:o=>{o.exports=function(h){return h&&typeof h=="object"&&typeof h.copy=="function"&&typeof h.fill=="function"&&typeof h.readUInt8=="function"}},539:(o,h,u)=>{var E=u(155),g=/%[sdj%]/g;h.format=function(m){if(!c(m)){for(var x=[],M=0;M<arguments.length;M++)x.push(f(arguments[M]));return x.join(" ")}M=1;for(var ne=arguments,ae=ne.length,Q=String(m).replace(g,function(ee){if(ee==="%%")return"%";if(M>=ae)return ee;switch(ee){case"%s":return String(ne[M++]);case"%d":return Number(ne[M++]);case"%j":try{return JSON.stringify(ne[M++])}catch{return"[Circular]"}default:return ee}}),Z=ne[M];M<ae;Z=ne[++M])N(Z)||!L(Z)?Q+=" "+Z:Q+=" "+f(Z);return Q},h.deprecate=function(m,x){if(p(u.g.process))return function(){return h.deprecate(m,x).apply(this,arguments)};if(E.noDeprecation===!0)return m;var M=!1;return function(){if(!M){if(E.throwDeprecation)throw new Error(x);E.traceDeprecation?console.trace(x):console.error(x),M=!0}return m.apply(this,arguments)}};var y,O={};function f(m,x){var M={seen:[],stylize:T};return arguments.length>=3&&(M.depth=arguments[2]),arguments.length>=4&&(M.colors=arguments[3]),B(x)?M.showHidden=x:x&&h._extend(M,x),p(M.showHidden)&&(M.showHidden=!1),p(M.depth)&&(M.depth=2),p(M.colors)&&(M.colors=!1),p(M.customInspect)&&(M.customInspect=!0),M.colors&&(M.stylize=v),S(M,m,M.depth)}function v(m,x){var M=f.styles[x];return M?"["+f.colors[M][0]+"m"+m+"["+f.colors[M][1]+"m":m}function T(m,x){return m}function S(m,x,M){if(m.customInspect&&x&&q(x.inspect)&&x.inspect!==h.inspect&&(!x.constructor||x.constructor.prototype!==x)){var ne=x.inspect(M,m);return c(ne)||(ne=S(m,ne,M)),ne}var ae=function(_,s){if(p(s))return _.stylize("undefined","undefined");if(c(s)){var d="'"+JSON.stringify(s).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return _.stylize(d,"string")}return k(s)?_.stylize(""+s,"number"):B(s)?_.stylize(""+s,"boolean"):N(s)?_.stylize("null","null"):void 0}(m,x);if(ae)return ae;var Q=Object.keys(x),Z=function(_){var s={};return _.forEach(function(d,$){s[d]=!0}),s}(Q);if(m.showHidden&&(Q=Object.getOwnPropertyNames(x)),J(x)&&(Q.indexOf("message")>=0||Q.indexOf("description")>=0))return X(x);if(Q.length===0){if(q(x)){var ee=x.name?": "+x.name:"";return m.stylize("[Function"+ee+"]","special")}if(w(x))return m.stylize(RegExp.prototype.toString.call(x),"regexp");if(z(x))return m.stylize(Date.prototype.toString.call(x),"date");if(J(x))return X(x)}var le,ve="",Ae=!1,Ie=["{","}"];return G(x)&&(Ae=!0,Ie=["[","]"]),q(x)&&(ve=" [Function"+(x.name?": "+x.name:"")+"]"),w(x)&&(ve=" "+RegExp.prototype.toString.call(x)),z(x)&&(ve=" "+Date.prototype.toUTCString.call(x)),J(x)&&(ve=" "+X(x)),Q.length!==0||Ae&&x.length!=0?M<0?w(x)?m.stylize(RegExp.prototype.toString.call(x),"regexp"):m.stylize("[Object]","special"):(m.seen.push(x),le=Ae?function(_,s,d,$,I){for(var A=[],D=0,W=s.length;D<W;++D)Ne(s,String(D))?A.push(H(_,s,d,$,String(D),!0)):A.push("");return I.forEach(function(C){C.match(/^\d+$/)||A.push(H(_,s,d,$,C,!0))}),A}(m,x,M,Z,Q):Q.map(function(_){return H(m,x,M,Z,_,Ae)}),m.seen.pop(),function(_,s,d){return _.reduce(function($,I){return I.indexOf(`
`),$+I.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?d[0]+(s===""?"":s+`
 `)+" "+_.join(`,
  `)+" "+d[1]:d[0]+s+" "+_.join(", ")+" "+d[1]}(le,ve,Ie)):Ie[0]+ve+Ie[1]}function X(m){return"["+Error.prototype.toString.call(m)+"]"}function H(m,x,M,ne,ae,Q){var Z,ee,le;if((le=Object.getOwnPropertyDescriptor(x,ae)||{value:x[ae]}).get?ee=le.set?m.stylize("[Getter/Setter]","special"):m.stylize("[Getter]","special"):le.set&&(ee=m.stylize("[Setter]","special")),Ne(ne,ae)||(Z="["+ae+"]"),ee||(m.seen.indexOf(le.value)<0?(ee=N(M)?S(m,le.value,null):S(m,le.value,M-1)).indexOf(`
`)>-1&&(ee=Q?ee.split(`
`).map(function(ve){return"  "+ve}).join(`
`).substr(2):`
`+ee.split(`
`).map(function(ve){return"   "+ve}).join(`
`)):ee=m.stylize("[Circular]","special")),p(Z)){if(Q&&ae.match(/^\d+$/))return ee;(Z=JSON.stringify(""+ae)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.substr(1,Z.length-2),Z=m.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=m.stylize(Z,"string"))}return Z+": "+ee}function G(m){return Array.isArray(m)}function B(m){return typeof m=="boolean"}function N(m){return m===null}function k(m){return typeof m=="number"}function c(m){return typeof m=="string"}function p(m){return m===void 0}function w(m){return L(m)&&P(m)==="[object RegExp]"}function L(m){return typeof m=="object"&&m!==null}function z(m){return L(m)&&P(m)==="[object Date]"}function J(m){return L(m)&&(P(m)==="[object Error]"||m instanceof Error)}function q(m){return typeof m=="function"}function P(m){return Object.prototype.toString.call(m)}function ie(m){return m<10?"0"+m.toString(10):m.toString(10)}h.debuglog=function(m){if(p(y)&&(y=E.env.NODE_DEBUG||""),m=m.toUpperCase(),!O[m])if(new RegExp("\\b"+m+"\\b","i").test(y)){var x=E.pid;O[m]=function(){var M=h.format.apply(h,arguments);console.error("%s %d: %s",m,x,M)}}else O[m]=function(){};return O[m]},h.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},h.isArray=G,h.isBoolean=B,h.isNull=N,h.isNullOrUndefined=function(m){return m==null},h.isNumber=k,h.isString=c,h.isSymbol=function(m){return typeof m=="symbol"},h.isUndefined=p,h.isRegExp=w,h.isObject=L,h.isDate=z,h.isError=J,h.isFunction=q,h.isPrimitive=function(m){return m===null||typeof m=="boolean"||typeof m=="number"||typeof m=="string"||typeof m=="symbol"||m===void 0},h.isBuffer=u(384);var re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Te(){var m=new Date,x=[ie(m.getHours()),ie(m.getMinutes()),ie(m.getSeconds())].join(":");return[m.getDate(),re[m.getMonth()],x].join(" ")}function Ne(m,x){return Object.prototype.hasOwnProperty.call(m,x)}h.log=function(){console.log("%s - %s",Te(),h.format.apply(h,arguments))},h.inherits=u(717),h._extend=function(m,x){if(!x||!L(x))return m;for(var M=Object.keys(x),ne=M.length;ne--;)m[M[ne]]=x[M[ne]];return m}}},n={};function i(o){var h=n[o];if(h!==void 0)return h.exports;var u=n[o]={exports:{}};return t[o].call(u.exports,u,u.exports,i),u.exports}i.n=o=>{var h=o&&o.__esModule?()=>o.default:()=>o;return i.d(h,{a:h}),h},i.d=(o,h)=>{for(var u in h)i.o(h,u)&&!i.o(o,u)&&Object.defineProperty(o,u,{enumerable:!0,get:h[u]})},i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(o,h)=>Object.prototype.hasOwnProperty.call(o,h),i.r=o=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var a={};return(()=>{i.r(a),i.d(a,{LSPluginUser:()=>Ae,setupPluginUserInstance:()=>Ie});var o=i(520);i(856);const h=navigator.platform.toLowerCase()==="win32"?o.win32:o.posix;function u(_){return _===Object(_)&&!Array.isArray(_)}function E(_,...s){if(!s.length)return _;const d=_;if(u(d)){const $=s.length;for(let I=0;I<$;I+=1){const A=s[I];if(u(A))for(const D in A)A.hasOwnProperty(D)&&(u(A[D])?(d[D]&&u(d[D])||(d[D]={}),E(d[D],A[D])):Array.isArray(d[D])&&Array.isArray(A[D])?d[D]=Array.from(new Set(d[D].concat(A[D]))):d[D]=A[D])}}return d}function g(_,s){let d,$,I=!1;const A=W=>C=>{_&&clearTimeout(_),W(C),I=!0},D=new Promise((W,C)=>{d=A(W),$=A(C),_&&(_=setTimeout(()=>$(new Error(`[deferred timeout] ${s}`)),_))});return{created:Date.now(),setTag:W=>s=W,resolve:d,reject:$,promise:D,get settled(){return I}}}var y=i(227),O=i.n(y);const f="application/x-postmate-v1+json";let v=0;const T={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},S=(_,s)=>!(typeof s=="string"&&_.origin!==s||!_.data||typeof _.data=="object"&&!("postmate"in _.data)||_.data.type!==f||!T[_.data.postmate]);class X{parent;frame;child;events={};childOrigin;listener;constructor(s){this.parent=s.parent,this.frame=s.frame,this.child=s.child,this.childOrigin=s.childOrigin,this.listener=d=>{if(!S(d,this.childOrigin))return!1;const{data:$,name:I}=((d||{}).data||{}).value||{};d.data.postmate==="emit"&&I in this.events&&this.events[I].forEach(A=>{A.call(this,$)})},this.parent.addEventListener("message",this.listener,!1)}get(s){return new Promise(d=>{const $=++v,I=A=>{A.data.uid===$&&A.data.postmate==="reply"&&(this.parent.removeEventListener("message",I,!1),d(A.data.value))};this.parent.addEventListener("message",I,!1),this.child.postMessage({postmate:"request",type:f,property:s,uid:$},this.childOrigin)})}call(s,d){this.child.postMessage({postmate:"call",type:f,property:s,data:d},this.childOrigin)}on(s,d){this.events[s]||(this.events[s]=[]),this.events[s].push(d)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class H{model;parent;parentOrigin;child;constructor(s){this.model=s.model,this.parent=s.parent,this.parentOrigin=s.parentOrigin,this.child=s.child,this.child.addEventListener("message",d=>{if(!S(d,this.parentOrigin))return;const{property:$,uid:I,data:A}=d.data;d.data.postmate!=="call"?((D,W)=>{const C=typeof D[W]=="function"?D[W]():D[W];return Promise.resolve(C)})(this.model,$).then(D=>{d.source.postMessage({property:$,postmate:"reply",type:f,uid:I,value:D},d.origin)}):$ in this.model&&typeof this.model[$]=="function"&&this.model[$](A)})}emit(s,d){this.parent.postMessage({postmate:"emit",type:f,value:{name:s,data:d}},this.parentOrigin)}}class G{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(s){this.container=s.container,this.url=s.url,this.parent=window,this.frame=document.createElement("iframe"),s.id&&(this.frame.id=s.id),s.name&&(this.frame.name=s.name),this.frame.classList.add.apply(this.frame.classList,s.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=s.model||{}}sendHandshake(s){const d=(A=>{const D=document.createElement("a");D.href=A;const W=D.protocol.length>4?D.protocol:window.location.protocol,C=D.host.length?D.port==="80"||D.port==="443"?D.hostname:D.host:window.location.host;return D.origin||`${W}//${C}`})(s=s||this.url);let $,I=0;return new Promise((A,D)=>{const W=R=>!!S(R,d)&&(R.data.postmate==="handshake-reply"?(clearInterval($),this.parent.removeEventListener("message",W,!1),this.childOrigin=R.origin,A(new X(this))):D("Failed handshake"));this.parent.addEventListener("message",W,!1);const C=()=>{I++,this.child.postMessage({postmate:"handshake",type:f,model:this.model},d),I===5&&clearInterval($)};this.frame.addEventListener("load",()=>{C(),$=setInterval(C,500)}),this.frame.src=s})}}class B{child;model;parent;parentOrigin;constructor(s){this.child=window,this.model=s,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((s,d)=>{const $=I=>{if(I.data.postmate){if(I.data.postmate==="handshake"){this.child.removeEventListener("message",$,!1),I.source.postMessage({postmate:"handshake-reply",type:f},I.origin),this.parentOrigin=I.origin;const A=I.data.model;return A&&Object.keys(A).forEach(D=>{this.model[D]=A[D]}),s(new H(this))}return d("Handshake Reply Failed")}};this.child.addEventListener("message",$,!1)})}}var N=i(729),k=i.n(N);const{importHTML:c,createSandboxContainer:p}=window.QSandbox||{};function w(_,s){return _.startsWith("http")?fetch(_,s):(_=_.replace("file://",""),new Promise(async(d,$)=>{try{const I=await window.apis.doAction(["readFile",_]);d({text:()=>I})}catch(I){console.error(I),$(I)}}))}class L extends k(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(s){super(),this._pluginLocal=s,s._dispose(()=>{this._unmount()})}async load(){const{name:s,entry:d}=this._pluginLocal.options;if(this.loaded||!d)return;const{template:$,execScripts:I}=await c(d,{fetch:w});this._mount($,document.body);const A=p(s,{elementGetter:()=>this._root?.firstChild}).instance.proxy;A.__shadow_mode__=!0,A.LSPluginLocal=this._pluginLocal,A.LSPluginShadow=this,A.LSPluginUser=A.logseq=new Ae(this._pluginLocal.toJSON(),this._pluginLocal.caller);const D=await I(A,!0);this._unmountFns.push(D.unmount),this._loaded=!0}_mount(s,d){const $=this._frame=document.createElement("div");$.classList.add("lsp-shadow-sandbox"),$.id=this._pluginLocal.id,this._root=$.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${s}</div>`,d.appendChild($),this.emit("mounted")}_unmount(){for(const s of this._unmountFns)s&&s.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const z=O()("LSPlugin:caller"),J="#await#response#",q="#lspmsg#error#",P=_=>`#lspmsg#${_}`;class ie extends k(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(s){super(),this._pluginLocal=s,s&&(this._debugTag=s.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:s}=this._pluginLocal;s?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(s={}){if(this._connected)return;const d=this,$=this._pluginLocal!=null;let I=0;const A=new Map,D=g(5e3),W=this._extendUserModel({"#lspmsg#ready#":async R=>{W[P(R?.pid)]=({type:b,payload:U})=>{z(`[call from host (_call)] ${this._debugTag}`,b,U),d.emit(b,U)},await D.resolve()},"#lspmsg#beforeunload#":async R=>{const b=g(1e4);d.emit("beforeunload",Object.assign({actor:b},R)),await b.promise},"#lspmsg#settings#":async({type:R,payload:b})=>{d.emit("settings:changed",b)},"#lspmsg#":async({ns:R,type:b,payload:U})=>{z(`[call from host (async)] ${this._debugTag}`,R,b,U),R&&R.startsWith("hook")?d.emit(`${R}:${b}`,U):d.emit(b,U)},"#lspmsg#reply#":({_sync:R,result:b})=>{if(z(`[sync reply] #${R}`,b),A.has(R)){const U=A.get(R);U&&(b?.hasOwnProperty(q)?U.reject(b[q]):U.resolve(b),A.delete(R))}},...s});if($)return await D.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const C=new B(W).sendHandshakeReply();return this._status="pending",await C.then(R=>{this._child=R,this._connected=!0,this._call=async(b,U={},V)=>{if(V){const ye=++I;A.set(ye,V),U._sync=ye,V.setTag(`async call #${ye}`),z("async call #",ye)}return R.emit(P(W.baseInfo.id),{type:b,payload:U}),V?.promise},this._callUserModel=async(b,U)=>{try{W[b](U)}catch{z(`[model method] #${b} not existed`)}},setInterval(()=>{if(A.size>100)for(const[b,U]of A)U.settled&&A.delete(b)},18e5)}).finally(()=>{this._status=void 0}),await D.promise,W.baseInfo}async call(s,d={}){return this._call?.call(this,s,d)}async callAsync(s,d={}){const $=g(1e4);return this._call?.call(this,s,d,$)}async callUserModel(s,d={}){return this._callUserModel?.call(this,s,d)}async _setupIframeSandbox(){const s=this._pluginLocal,d=s.id,$=new URL(s.options.entry);$.searchParams.set("__v__",s.options.version);const I=document.querySelector(`#${d}`);I&&I.parentElement.removeChild(I);const A=document.createElement("div");A.classList.add("lsp-iframe-sandbox-container"),A.id=d;{const C=this._pluginLocal.settings.get("layout")?.[0];if(C){A.dataset.inited_layout="true";const{width:R,height:b,left:U,top:V}=C;Object.assign(A.style,{width:R+"px",height:b+"px",left:U+"px",top:V+"px"})}}document.body.appendChild(A);let D,W=new G({id:d+"_iframe",container:A,url:$.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(s.toJSON()))}}).sendHandshake();return this._status="pending",new Promise((C,R)=>{D=setTimeout(()=>{R(new Error("handshake Timeout"))},3e3),W.then(b=>{this._parent=b,this._connected=!0,this.emit("connected"),b.on(P(s.id),({type:U,payload:V})=>{z("[call from plugin] ",U,V),this._pluginLocal?.emit(U,V||{})}),this._call=async(...U)=>{await b.call(P(s.id),{type:U[0],payload:Object.assign(U[1]||{},{$$pid:s.id})})},this._callUserModel=async(U,V)=>{if(U.startsWith(J))return await b.get(U.replace(J,""));b.call(U,V)},C(null)}).catch(b=>{R(b)}).finally(()=>{clearTimeout(D)})}).catch(C=>{throw z("[iframe sandbox] error",C),C}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const s=this._pluginLocal,d=this._shadow=new L(s);try{this._status="pending",await d.load(),this._connected=!0,this.emit("connected"),this._call=async($,I={},A)=>(A&&(I.actor=A),this._pluginLocal?.emit($,Object.assign(I,{$$pid:s.id})),A?.promise),this._callUserModel=async(...$)=>{let I=$[0];I?.startsWith(J)&&(I=I.replace(J,""));const A=$[1]||{},D=this._userModel[I];typeof D=="function"&&await D.call(null,A)}}catch($){throw z("[shadow sandbox] error",$),$}finally{this._status=void 0}}_extendUserModel(s){return Object.assign(this._userModel,s)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(s){this._debugTag=s}async destroy(){let s=null;this._parent&&(s=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(s=this._getSandboxShadowContainer(),this._shadow.destroy()),s?.parentNode.removeChild(s)}}var re=function(){return(re=Object.assign||function(_){for(var s,d=1,$=arguments.length;d<$;d++)for(var I in s=arguments[d])Object.prototype.hasOwnProperty.call(s,I)&&(_[I]=s[I]);return _}).apply(this,arguments)};function Te(_){return _.toLowerCase()}var Ne=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],m=/[^A-Z0-9]+/gi;function x(_,s,d){return s instanceof RegExp?_.replace(s,d):s.reduce(function($,I){return $.replace(I,d)},_)}class M{ctx;constructor(s){this.ctx=s}get ctxId(){return this.ctx.baseInfo.id}setItem(s,d){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,s,d]})}getItem(s){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,s]})}removeItem(s){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,s]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(s){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,s]})}}const ne=Symbol.for("proxy-continue"),ae=O()("LSPlugin:user");function Q(_,s,d){if(typeof d!="function")return!1;const{key:$,label:I,desc:A,palette:D,keybinding:W}=s,C=`SimpleCommandHook${$}${++ee}`;this.Editor["on"+C](d),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:$,label:I,type:_,desc:A,keybinding:W},["editor/hook",C]],D]})}const Z={registerCommand:Q,registerCommandPalette(_,s){const{key:d,label:$,keybinding:I}=_;return Q.call(this,"global-palette-command",{key:d,label:$,palette:!0,keybinding:I},s)},registerUIItem(_,s){const d=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[d,_,s]})},registerPageMenuItem(_,s){if(typeof s!="function")return!1;const d=_+"_"+this.baseInfo.id,$=_;Q.call(this,"page-menu-item",{key:d,label:$},s)},setFullScreen(_){const s=(...d)=>this._callWin("setFullScreen",...d);_==="toggle"?this._callWin("isFullScreen").then(d=>{d?s():s(!0)}):_?s(!0):s()}};let ee=0;const le={registerSlashCommand(_,s){ae("Register slash command #",this.baseInfo.id,_,s),typeof s=="function"&&(s=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",s]]),s=s.map(d=>{const[$,...I]=d;switch($){case"editor/hook":let A=I[0],D=()=>{this.caller?.callUserModel(A)};typeof A=="function"&&(D=A);const W=`SlashCommandHook${$}${++ee}`;d[1]=W,this.Editor["on"+W](D)}return d}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[_,s]]})},registerBlockContextMenuItem(_,s){if(typeof s!="function")return!1;const d=_+"_"+this.baseInfo.id,$=_;Q.call(this,"block-context-menu-item",{key:d,label:$},s)},scrollToBlockInPage(_,s){const d="block-content-"+s;this.App.pushState("page",{name:_},{anchor:d})}},ve={};class Ae extends k(){_baseInfo;_caller;_connected=!1;_ui=new Map;_fileStorage;_beforeunloadCallback;constructor(s,d){super(),this._baseInfo=s,this._caller=d,d.on("sys:ui:visible",$=>{$?.toggle&&this.toggleMainUI()}),d.on("settings:changed",$=>{const I=Object.assign({},this.settings),A=Object.assign(this._baseInfo.settings,$);this.emit("settings:changed",{...A},I)}),d.on("beforeunload",async $=>{const{actor:I,...A}=$,D=this._beforeunloadCallback;try{D&&await D(A),I?.resolve(null)}catch(W){console.debug(`${d.debugTag} [beforeunload] `,W),I?.reject(W)}}),this._fileStorage=new M(this)}async ready(s,d){if(!this._connected)try{typeof s=="function"&&(d=s,s={});let $=await this._caller.connectToParent(s);$=E(this._baseInfo,$),this._connected=!0,$?.id&&(this._caller.debugTag=`#${$.id} [${$.name}]`),d&&d.call(this,$)}catch($){console.error("[LSPlugin Ready Error]",$)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(s){typeof s=="function"&&(this._beforeunloadCallback=s)}provideModel(s){return this.caller._extendUserModel(s),this}provideTheme(s){return this.caller.call("provider:theme",s),this}provideStyle(s){return this.caller.call("provider:style",s),this}provideUI(s){return this.caller.call("provider:ui",s),this}updateSettings(s){this.caller.call("settings:update",s)}setMainUIAttrs(s){this.caller.call("main-ui:attrs",s)}setMainUIInlineStyle(s){this.caller.call("main-ui:style",s)}hideMainUI(s){const d={key:0,visible:!1,cursor:s?.restoreEditingCursor};this.caller.call("main-ui:visible",d),this.emit("ui:visible:changed",d),this._ui.set(d.key,d)}showMainUI(s){const d={key:0,visible:!0,autoFocus:s?.autoFocus};this.caller.call("main-ui:visible",d),this.emit("ui:visible:changed",d),this._ui.set(d.key,d)}toggleMainUI(){const s=this._ui.get(0);s&&s.visible?this.hideMainUI():this.showMainUI()}get isMainUIVisible(){const s=this._ui.get(0);return Boolean(s&&s.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(s){if(this.ensureConnected(),s)return s=s.replace(/^[.\\/]+/,""),function(d,...$){try{const I=new URL(d);if(!I.origin)throw new Error(null);const A=h.join(d.substr(I.origin.length),...$);return I.origin+A}catch{return h.join(d,...$)}}(this._baseInfo.lsr,s)}_makeUserProxy(s,d){const $=this,I=this.caller;return new Proxy(s,{get(A,D,W){const C=A[D];return function(...R){if(!C||C.apply($,R)===ne){if(d){const V=D.toString().match(/^(once|off|on)/i);if(V!=null){const ye=V[0].toLowerCase(),Ft=V.input.slice(ye.length),Me=`hook:${d}:${b=Ft,U===void 0&&(U={}),function(tt,ze){return ze===void 0&&(ze={}),function(Dt,Fe){Fe===void 0&&(Fe={});for(var ht=Fe.splitRegexp,jt=ht===void 0?Ne:ht,ft=Fe.stripRegexp,He=ft===void 0?m:ft,pt=Fe.transform,Pt=pt===void 0?Te:pt,dt=Fe.delimiter,rt=dt===void 0?" ":dt,De=x(x(Dt,jt,"$1\0$2"),He,"\0"),Ee=0,Xe=De.length;De.charAt(Ee)==="\0";)Ee++;for(;De.charAt(Xe-1)==="\0";)Xe--;return De.slice(Ee,Xe).split("\0").map(Pt).join(rt)}(tt,re({delimiter:"."},ze))}(b,re({delimiter:"_"},U))}`,et=R[0];return I[ye](Me,et),ye!=="off"?()=>I.off(Me,et):void 0}}var b,U;return I.callAsync("api:call",{tag:d,method:D,args:R})}}}})}_callWin(...s){return this._caller.callAsync("api:call",{method:"_callMainWin",args:s})}get App(){return this._makeUserProxy(Z,"app")}get Editor(){return this._makeUserProxy(le,"editor")}get DB(){return this._makeUserProxy(ve)}get FileStorage(){return this._fileStorage}}function Ie(_,s){return new Ae(_,s)}if(window.__LSP__HOST__==null){const _=new ie(null);window.logseq=Ie({},_)}})(),a})()})})(On);var Pe={exports:{}};const In="2.0.0",Rn=256,Cn=Number.MAX_SAFE_INTEGER||9007199254740991,xn=16;var wt={SEMVER_SPEC_VERSION:In,MAX_LENGTH:Rn,MAX_SAFE_INTEGER:Cn,MAX_SAFE_COMPONENT_LENGTH:xn};const Ln=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var $t=Ln;(function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:t}=wt,n=$t;e=r.exports={};const i=e.re=[],a=e.src=[],o=e.t={};let h=0;const u=(E,g,y)=>{const O=h++;n(O,g),o[E]=O,a[O]=g,i[O]=new RegExp(g,y?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${a[o.NUMERICIDENTIFIER]}|${a[o.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${a[o.NUMERICIDENTIFIERLOOSE]}|${a[o.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${a[o.PRERELEASEIDENTIFIER]}(?:\\.${a[o.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${a[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[o.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${a[o.BUILDIDENTIFIER]}(?:\\.${a[o.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${a[o.MAINVERSION]}${a[o.PRERELEASE]}?${a[o.BUILD]}?`),u("FULL",`^${a[o.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${a[o.MAINVERSIONLOOSE]}${a[o.PRERELEASELOOSE]}?${a[o.BUILD]}?`),u("LOOSE",`^${a[o.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${a[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${a[o.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:${a[o.PRERELEASE]})?${a[o.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:${a[o.PRERELEASELOOSE]})?${a[o.BUILD]}?)?)?`),u("XRANGE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),u("COERCERTL",a[o.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${a[o.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",u("TILDE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${a[o.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",u("CARET",`^${a[o.LONECARET]}${a[o.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${a[o.LONECARET]}${a[o.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${a[o.GTLT]}\\s*(${a[o.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]}|${a[o.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${a[o.XRANGEPLAIN]})\\s+-\\s+(${a[o.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${a[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[o.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0.0.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")})(Pe,Pe.exports);const Nn=["includePrerelease","loose","rtl"],Fn=r=>r?typeof r!="object"?{loose:!0}:Nn.filter(e=>r[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};var St=Fn;const Pr=/^[0-9]+$/,Mr=(r,e)=>{const t=Pr.test(r),n=Pr.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},Dn=(r,e)=>Mr(e,r);var Qt={compareIdentifiers:Mr,rcompareIdentifiers:Dn};const _t=$t,{MAX_LENGTH:Ur,MAX_SAFE_INTEGER:Tt}=wt,{re:kr,t:Gr}=Pe.exports,jn=St,{compareIdentifiers:it}=Qt;class we{constructor(e,t){if(t=jn(t),e instanceof we){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Ur)throw new TypeError(`version is longer than ${Ur} characters`);_t("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?kr[Gr.LOOSE]:kr[Gr.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Tt||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Tt||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Tt||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const a=+i;if(a>=0&&a<Tt)return a}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(_t("SemVer.compare",this.version,this.options,e),!(e instanceof we)){if(typeof e=="string"&&e===this.version)return 0;e=new we(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof we||(e=new we(e,this.options)),it(this.major,e.major)||it(this.minor,e.minor)||it(this.patch,e.patch)}comparePre(e){if(e instanceof we||(e=new we(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(_t("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return it(n,i)}while(++t)}compareBuild(e){e instanceof we||(e=new we(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(_t("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return it(n,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var me=we;const{MAX_LENGTH:Pn}=wt,{re:zr,t:Hr}=Pe.exports,Xr=me,Mn=St,Un=(r,e)=>{if(e=Mn(e),r instanceof Xr)return r;if(typeof r!="string"||r.length>Pn||!(e.loose?zr[Hr.LOOSE]:zr[Hr.FULL]).test(r))return null;try{return new Xr(r,e)}catch{return null}};var Ze=Un;const kn=Ze,Gn=(r,e)=>{const t=kn(r,e);return t?t.version:null};var zn=Gn;const Hn=Ze,Xn=(r,e)=>{const t=Hn(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};var Bn=Xn;const Vn=me,qn=(r,e,t,n)=>{typeof t=="string"&&(n=t,t=void 0);try{return new Vn(r,t).inc(e,n).version}catch{return null}};var Wn=qn;const Br=me,Jn=(r,e,t)=>new Br(r,t).compare(new Br(e,t));var $e=Jn;const Yn=$e,Zn=(r,e,t)=>Yn(r,e,t)===0;var er=Zn;const Vr=Ze,Kn=er,Qn=(r,e)=>{if(Kn(r,e))return null;{const t=Vr(r),n=Vr(e),i=t.prerelease.length||n.prerelease.length,a=i?"pre":"",o=i?"prerelease":"";for(const h in t)if((h==="major"||h==="minor"||h==="patch")&&t[h]!==n[h])return a+h;return o}};var es=Qn;const ts=me,rs=(r,e)=>new ts(r,e).major;var ns=rs;const ss=me,is=(r,e)=>new ss(r,e).minor;var os=is;const as=me,ls=(r,e)=>new as(r,e).patch;var cs=ls;const us=Ze,hs=(r,e)=>{const t=us(r,e);return t&&t.prerelease.length?t.prerelease:null};var fs=hs;const ps=$e,ds=(r,e,t)=>ps(e,r,t);var ms=ds;const gs=$e,vs=(r,e)=>gs(r,e,!0);var ys=vs;const qr=me,Es=(r,e,t)=>{const n=new qr(r,t),i=new qr(e,t);return n.compare(i)||n.compareBuild(i)};var tr=Es;const bs=tr,ws=(r,e)=>r.sort((t,n)=>bs(t,n,e));var $s=ws;const Ss=tr,_s=(r,e)=>r.sort((t,n)=>Ss(n,t,e));var Ts=_s;const As=$e,Os=(r,e,t)=>As(r,e,t)>0;var At=Os;const Is=$e,Rs=(r,e,t)=>Is(r,e,t)<0;var rr=Rs;const Cs=$e,xs=(r,e,t)=>Cs(r,e,t)!==0;var Wr=xs;const Ls=$e,Ns=(r,e,t)=>Ls(r,e,t)>=0;var nr=Ns;const Fs=$e,Ds=(r,e,t)=>Fs(r,e,t)<=0;var sr=Ds;const js=er,Ps=Wr,Ms=At,Us=nr,ks=rr,Gs=sr,zs=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return js(r,t,n);case"!=":return Ps(r,t,n);case">":return Ms(r,t,n);case">=":return Us(r,t,n);case"<":return ks(r,t,n);case"<=":return Gs(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var Jr=zs;const Hs=me,Xs=Ze,{re:Ot,t:It}=Pe.exports,Bs=(r,e)=>{if(r instanceof Hs)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(Ot[It.COERCE]);else{let n;for(;(n=Ot[It.COERCERTL].exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),Ot[It.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Ot[It.COERCERTL].lastIndex=-1}return t===null?null:Xs(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};var Vs=Bs,qs=Y;Y.Node=Ue;Y.create=Y;function Y(r){var e=this;if(e instanceof Y||(e=new Y),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}Y.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};Y.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};Y.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};Y.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)Js(this,arguments[r]);return this.length};Y.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)Ys(this,arguments[r]);return this.length};Y.prototype.pop=function(){if(!!this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};Y.prototype.shift=function(){if(!!this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};Y.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};Y.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};Y.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};Y.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};Y.prototype.map=function(r,e){e=e||this;for(var t=new Y,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};Y.prototype.mapReverse=function(r,e){e=e||this;for(var t=new Y,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};Y.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)t=r(t,n.value,i),n=n.next;return t};Y.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)t=r(t,n.value,i),n=n.prev;return t};Y.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};Y.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};Y.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new Y;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)t.push(i.value);return t};Y.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new Y;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>r;n--,i=i.prev)t.push(i.value);return t};Y.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(var a=[],n=0;i&&n<e;n++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<t.length;n++)i=Ws(this,i,t[n]);return a};Y.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function Ws(r,e,t){var n=e===r.head?new Ue(t,null,e,r):new Ue(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function Js(r,e){r.tail=new Ue(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function Ys(r,e){r.head=new Ue(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Ue(r,e,t,n){if(!(this instanceof Ue))return new Ue(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{require("./iterator.js")(Y)}catch{}const Zs=qs,ke=Symbol("max"),xe=Symbol("length"),Ke=Symbol("lengthCalculator"),ot=Symbol("allowStale"),Ge=Symbol("maxAge"),Le=Symbol("dispose"),Yr=Symbol("noDisposeOnSet"),oe=Symbol("lruList"),Se=Symbol("cache"),Zr=Symbol("updateAgeOnGet"),ir=()=>1;class Ks{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[ke]=e.max||1/0;const t=e.length||ir;if(this[Ke]=typeof t!="function"?ir:t,this[ot]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ge]=e.maxAge||0,this[Le]=e.dispose,this[Yr]=e.noDisposeOnSet||!1,this[Zr]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[ke]=e||1/0,at(this)}get max(){return this[ke]}set allowStale(e){this[ot]=!!e}get allowStale(){return this[ot]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Ge]=e,at(this)}get maxAge(){return this[Ge]}set lengthCalculator(e){typeof e!="function"&&(e=ir),e!==this[Ke]&&(this[Ke]=e,this[xe]=0,this[oe].forEach(t=>{t.length=this[Ke](t.value,t.key),this[xe]+=t.length})),at(this)}get lengthCalculator(){return this[Ke]}get length(){return this[xe]}get itemCount(){return this[oe].length}rforEach(e,t){t=t||this;for(let n=this[oe].tail;n!==null;){const i=n.prev;Kr(this,e,n,t),n=i}}forEach(e,t){t=t||this;for(let n=this[oe].head;n!==null;){const i=n.next;Kr(this,e,n,t),n=i}}keys(){return this[oe].toArray().map(e=>e.key)}values(){return this[oe].toArray().map(e=>e.value)}reset(){this[Le]&&this[oe]&&this[oe].length&&this[oe].forEach(e=>this[Le](e.key,e.value)),this[Se]=new Map,this[oe]=new Zs,this[xe]=0}dump(){return this[oe].map(e=>Rt(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[oe]}set(e,t,n){if(n=n||this[Ge],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const i=n?Date.now():0,a=this[Ke](t,e);if(this[Se].has(e)){if(a>this[ke])return Qe(this,this[Se].get(e)),!1;const u=this[Se].get(e).value;return this[Le]&&(this[Yr]||this[Le](e,u.value)),u.now=i,u.maxAge=n,u.value=t,this[xe]+=a-u.length,u.length=a,this.get(e),at(this),!0}const o=new Qs(e,t,a,i,n);return o.length>this[ke]?(this[Le]&&this[Le](e,t),!1):(this[xe]+=o.length,this[oe].unshift(o),this[Se].set(e,this[oe].head),at(this),!0)}has(e){if(!this[Se].has(e))return!1;const t=this[Se].get(e).value;return!Rt(this,t)}get(e){return or(this,e,!0)}peek(e){return or(this,e,!1)}pop(){const e=this[oe].tail;return e?(Qe(this,e),e.value):null}del(e){Qe(this,this[Se].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const i=e[n],a=i.e||0;if(a===0)this.set(i.k,i.v);else{const o=a-t;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Se].forEach((e,t)=>or(this,t,!1))}}const or=(r,e,t)=>{const n=r[Se].get(e);if(n){const i=n.value;if(Rt(r,i)){if(Qe(r,n),!r[ot])return}else t&&(r[Zr]&&(n.value.now=Date.now()),r[oe].unshiftNode(n));return i.value}},Rt=(r,e)=>{if(!e||!e.maxAge&&!r[Ge])return!1;const t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[Ge]&&t>r[Ge]},at=r=>{if(r[xe]>r[ke])for(let e=r[oe].tail;r[xe]>r[ke]&&e!==null;){const t=e.prev;Qe(r,e),e=t}},Qe=(r,e)=>{if(e){const t=e.value;r[Le]&&r[Le](t.key,t.value),r[xe]-=t.length,r[Se].delete(t.key),r[oe].removeNode(e)}};class Qs{constructor(e,t,n,i,a){this.key=e,this.value=t,this.length=n,this.now=i,this.maxAge=a||0}}const Kr=(r,e,t,n)=>{let i=t.value;Rt(r,i)&&(Qe(r,t),r[ot]||(i=void 0)),i&&e.call(n,i.value,i.key,r)};var ei=Ks;class lt{constructor(e,t){if(t=ri(t),e instanceof lt)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new lt(e.raw,t);if(e instanceof ar)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const n=this.set[0];if(this.set=this.set.filter(i=>!en(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(const i of this.set)if(i.length===1&&ai(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=Qr.get(n);if(i)return i;const a=this.options.loose,o=a?pe[ue.HYPHENRANGELOOSE]:pe[ue.HYPHENRANGE];e=e.replace(o,vi(this.options.includePrerelease)),se("hyphen replace",e),e=e.replace(pe[ue.COMPARATORTRIM],si),se("comparator trim",e,pe[ue.COMPARATORTRIM]),e=e.replace(pe[ue.TILDETRIM],ii),e=e.replace(pe[ue.CARETTRIM],oi),e=e.split(/\s+/).join(" ");const h=a?pe[ue.COMPARATORLOOSE]:pe[ue.COMPARATOR],u=e.split(" ").map(y=>li(y,this.options)).join(" ").split(/\s+/).map(y=>gi(y,this.options)).filter(this.options.loose?y=>!!y.match(h):()=>!0).map(y=>new ar(y,this.options));u.length;const E=new Map;for(const y of u){if(en(y))return[y];E.set(y.value,y)}E.size>1&&E.has("")&&E.delete("");const g=[...E.values()];return Qr.set(n,g),g}intersects(e,t){if(!(e instanceof lt))throw new TypeError("a Range is required");return this.set.some(n=>tn(n,t)&&e.set.some(i=>tn(i,t)&&n.every(a=>i.every(o=>a.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ni(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(yi(this.set[t],e,this.options))return!0;return!1}}var _e=lt;const ti=ei,Qr=new ti({max:1e3}),ri=St,ar=xt,se=$t,ni=me,{re:pe,t:ue,comparatorTrimReplace:si,tildeTrimReplace:ii,caretTrimReplace:oi}=Pe.exports,en=r=>r.value==="<0.0.0-0",ai=r=>r.value==="",tn=(r,e)=>{let t=!0;const n=r.slice();let i=n.pop();for(;t&&n.length;)t=n.every(a=>i.intersects(a,e)),i=n.pop();return t},li=(r,e)=>(se("comp",r,e),r=hi(r,e),se("caret",r),r=ci(r,e),se("tildes",r),r=pi(r,e),se("xrange",r),r=mi(r,e),se("stars",r),r),ge=r=>!r||r.toLowerCase()==="x"||r==="*",ci=(r,e)=>r.trim().split(/\s+/).map(t=>ui(t,e)).join(" "),ui=(r,e)=>{const t=e.loose?pe[ue.TILDELOOSE]:pe[ue.TILDE];return r.replace(t,(n,i,a,o,h)=>{se("tilde",r,n,i,a,o,h);let u;return ge(i)?u="":ge(a)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:ge(o)?u=`>=${i}.${a}.0 <${i}.${+a+1}.0-0`:h?(se("replaceTilde pr",h),u=`>=${i}.${a}.${o}-${h} <${i}.${+a+1}.0-0`):u=`>=${i}.${a}.${o} <${i}.${+a+1}.0-0`,se("tilde return",u),u})},hi=(r,e)=>r.trim().split(/\s+/).map(t=>fi(t,e)).join(" "),fi=(r,e)=>{se("caret",r,e);const t=e.loose?pe[ue.CARETLOOSE]:pe[ue.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(i,a,o,h,u)=>{se("caret",r,i,a,o,h,u);let E;return ge(a)?E="":ge(o)?E=`>=${a}.0.0${n} <${+a+1}.0.0-0`:ge(h)?a==="0"?E=`>=${a}.${o}.0${n} <${a}.${+o+1}.0-0`:E=`>=${a}.${o}.0${n} <${+a+1}.0.0-0`:u?(se("replaceCaret pr",u),a==="0"?o==="0"?E=`>=${a}.${o}.${h}-${u} <${a}.${o}.${+h+1}-0`:E=`>=${a}.${o}.${h}-${u} <${a}.${+o+1}.0-0`:E=`>=${a}.${o}.${h}-${u} <${+a+1}.0.0-0`):(se("no pr"),a==="0"?o==="0"?E=`>=${a}.${o}.${h}${n} <${a}.${o}.${+h+1}-0`:E=`>=${a}.${o}.${h}${n} <${a}.${+o+1}.0-0`:E=`>=${a}.${o}.${h} <${+a+1}.0.0-0`),se("caret return",E),E})},pi=(r,e)=>(se("replaceXRanges",r,e),r.split(/\s+/).map(t=>di(t,e)).join(" ")),di=(r,e)=>{r=r.trim();const t=e.loose?pe[ue.XRANGELOOSE]:pe[ue.XRANGE];return r.replace(t,(n,i,a,o,h,u)=>{se("xRange",r,n,i,a,o,h,u);const E=ge(a),g=E||ge(o),y=g||ge(h),O=y;return i==="="&&O&&(i=""),u=e.includePrerelease?"-0":"",E?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&O?(g&&(o=0),h=0,i===">"?(i=">=",g?(a=+a+1,o=0,h=0):(o=+o+1,h=0)):i==="<="&&(i="<",g?a=+a+1:o=+o+1),i==="<"&&(u="-0"),n=`${i+a}.${o}.${h}${u}`):g?n=`>=${a}.0.0${u} <${+a+1}.0.0-0`:y&&(n=`>=${a}.${o}.0${u} <${a}.${+o+1}.0-0`),se("xRange return",n),n})},mi=(r,e)=>(se("replaceStars",r,e),r.trim().replace(pe[ue.STAR],"")),gi=(r,e)=>(se("replaceGTE0",r,e),r.trim().replace(pe[e.includePrerelease?ue.GTE0PRE:ue.GTE0],"")),vi=r=>(e,t,n,i,a,o,h,u,E,g,y,O,f)=>(ge(n)?t="":ge(i)?t=`>=${n}.0.0${r?"-0":""}`:ge(a)?t=`>=${n}.${i}.0${r?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,ge(E)?u="":ge(g)?u=`<${+E+1}.0.0-0`:ge(y)?u=`<${E}.${+g+1}.0-0`:O?u=`<=${E}.${g}.${y}-${O}`:r?u=`<${E}.${g}.${+y+1}-0`:u=`<=${u}`,`${t} ${u}`.trim()),yi=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(se(r[n].semver),r[n].semver!==ar.ANY&&r[n].semver.prerelease.length>0){const i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},ct=Symbol("SemVer ANY");class Ct{static get ANY(){return ct}constructor(e,t){if(t=Ei(t),e instanceof Ct){if(e.loose===!!t.loose)return e;e=e.value}cr("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ct?this.value="":this.value=this.operator+this.semver.version,cr("comp",this)}parse(e){const t=this.options.loose?rn[nn.COMPARATORLOOSE]:rn[nn.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new sn(n[2],this.options.loose):this.semver=ct}toString(){return this.value}test(e){if(cr("Comparator.test",e,this.options.loose),this.semver===ct||e===ct)return!0;if(typeof e=="string")try{e=new sn(e,this.options)}catch{return!1}return lr(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Ct))throw new TypeError("a Comparator is required");if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new on(e.value,t).test(this.value);if(e.operator==="")return e.value===""?!0:new on(this.value,t).test(e.semver);const n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),h=lr(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=lr(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&o||h||u}}var xt=Ct;const Ei=St,{re:rn,t:nn}=Pe.exports,lr=Jr,cr=$t,sn=me,on=_e,bi=_e,wi=(r,e,t)=>{try{e=new bi(e,t)}catch{return!1}return e.test(r)};var Lt=wi;const $i=_e,Si=(r,e)=>new $i(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));var _i=Si;const Ti=me,Ai=_e,Oi=(r,e,t)=>{let n=null,i=null,a=null;try{a=new Ai(e,t)}catch{return null}return r.forEach(o=>{a.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new Ti(n,t))}),n};var Ii=Oi;const Ri=me,Ci=_e,xi=(r,e,t)=>{let n=null,i=null,a=null;try{a=new Ci(e,t)}catch{return null}return r.forEach(o=>{a.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new Ri(n,t))}),n};var Li=xi;const ur=me,Ni=_e,an=At,Fi=(r,e)=>{r=new Ni(r,e);let t=new ur("0.0.0");if(r.test(t)||(t=new ur("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){const i=r.set[n];let a=null;i.forEach(o=>{const h=new ur(o.semver.version);switch(o.operator){case">":h.prerelease.length===0?h.patch++:h.prerelease.push(0),h.raw=h.format();case"":case">=":(!a||an(h,a))&&(a=h);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),a&&(!t||an(t,a))&&(t=a)}return t&&r.test(t)?t:null};var Di=Fi;const ji=_e,Pi=(r,e)=>{try{return new ji(r,e).range||"*"}catch{return null}};var Mi=Pi;const Ui=me,ln=xt,{ANY:ki}=ln,Gi=_e,zi=Lt,cn=At,un=rr,Hi=sr,Xi=nr,Bi=(r,e,t,n)=>{r=new Ui(r,n),e=new Gi(e,n);let i,a,o,h,u;switch(t){case">":i=cn,a=Hi,o=un,h=">",u=">=";break;case"<":i=un,a=Xi,o=cn,h="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(zi(r,e,n))return!1;for(let E=0;E<e.set.length;++E){const g=e.set[E];let y=null,O=null;if(g.forEach(f=>{f.semver===ki&&(f=new ln(">=0.0.0")),y=y||f,O=O||f,i(f.semver,y.semver,n)?y=f:o(f.semver,O.semver,n)&&(O=f)}),y.operator===h||y.operator===u||(!O.operator||O.operator===h)&&a(r,O.semver))return!1;if(O.operator===u&&o(r,O.semver))return!1}return!0};var hr=Bi;const Vi=hr,qi=(r,e,t)=>Vi(r,e,">",t);var Wi=qi;const Ji=hr,Yi=(r,e,t)=>Ji(r,e,"<",t);var Zi=Yi;const hn=_e,Ki=(r,e,t)=>(r=new hn(r,t),e=new hn(e,t),r.intersects(e));var Qi=Ki;const eo=Lt,to=$e;var ro=(r,e,t)=>{const n=[];let i=null,a=null;const o=r.sort((g,y)=>to(g,y,t));for(const g of o)eo(g,e,t)?(a=g,i||(i=g)):(a&&n.push([i,a]),a=null,i=null);i&&n.push([i,null]);const h=[];for(const[g,y]of n)g===y?h.push(g):!y&&g===o[0]?h.push("*"):y?g===o[0]?h.push(`<=${y}`):h.push(`${g} - ${y}`):h.push(`>=${g}`);const u=h.join(" || "),E=typeof e.raw=="string"?e.raw:String(e);return u.length<E.length?u:e};const fn=_e,Nt=xt,{ANY:fr}=Nt,ut=Lt,pr=$e,no=(r,e,t={})=>{if(r===e)return!0;r=new fn(r,t),e=new fn(e,t);let n=!1;e:for(const i of r.set){for(const a of e.set){const o=so(i,a,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},so=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===fr){if(e.length===1&&e[0].semver===fr)return!0;t.includePrerelease?r=[new Nt(">=0.0.0-0")]:r=[new Nt(">=0.0.0")]}if(e.length===1&&e[0].semver===fr){if(t.includePrerelease)return!0;e=[new Nt(">=0.0.0")]}const n=new Set;let i,a;for(const f of r)f.operator===">"||f.operator===">="?i=pn(i,f,t):f.operator==="<"||f.operator==="<="?a=dn(a,f,t):n.add(f.semver);if(n.size>1)return null;let o;if(i&&a){if(o=pr(i.semver,a.semver,t),o>0)return null;if(o===0&&(i.operator!==">="||a.operator!=="<="))return null}for(const f of n){if(i&&!ut(f,String(i),t)||a&&!ut(f,String(a),t))return null;for(const v of e)if(!ut(f,String(v),t))return!1;return!0}let h,u,E,g,y=a&&!t.includePrerelease&&a.semver.prerelease.length?a.semver:!1,O=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;y&&y.prerelease.length===1&&a.operator==="<"&&y.prerelease[0]===0&&(y=!1);for(const f of e){if(g=g||f.operator===">"||f.operator===">=",E=E||f.operator==="<"||f.operator==="<=",i){if(O&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===O.major&&f.semver.minor===O.minor&&f.semver.patch===O.patch&&(O=!1),f.operator===">"||f.operator===">="){if(h=pn(i,f,t),h===f&&h!==i)return!1}else if(i.operator===">="&&!ut(i.semver,String(f),t))return!1}if(a){if(y&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===y.major&&f.semver.minor===y.minor&&f.semver.patch===y.patch&&(y=!1),f.operator==="<"||f.operator==="<="){if(u=dn(a,f,t),u===f&&u!==a)return!1}else if(a.operator==="<="&&!ut(a.semver,String(f),t))return!1}if(!f.operator&&(a||i)&&o!==0)return!1}return!(i&&E&&!a&&o!==0||a&&g&&!i&&o!==0||O||y)},pn=(r,e,t)=>{if(!r)return e;const n=pr(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},dn=(r,e,t)=>{if(!r)return e;const n=pr(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};var io=no;const dr=Pe.exports;var ao={re:dr.re,src:dr.src,tokens:dr.t,SEMVER_SPEC_VERSION:wt.SEMVER_SPEC_VERSION,SemVer:me,compareIdentifiers:Qt.compareIdentifiers,rcompareIdentifiers:Qt.rcompareIdentifiers,parse:Ze,valid:zn,clean:Bn,inc:Wn,diff:es,major:ns,minor:os,patch:cs,prerelease:fs,compare:$e,rcompare:ms,compareLoose:ys,compareBuild:tr,sort:$s,rsort:Ts,gt:At,lt:rr,eq:er,neq:Wr,gte:nr,lte:sr,cmp:Jr,coerce:Vs,Comparator:xt,Range:_e,satisfies:Lt,toComparators:_i,maxSatisfying:Ii,minSatisfying:Li,minVersion:Di,validRange:Mi,outside:hr,gtr:Wi,ltr:Zi,intersects:Qi,simplifyRange:ro,subset:io};export{ao as s};
