title:: Readwise/Highlights/16 | 按需加载：如何提升应用打开速度？ - React Hooks 核心原理与实战 (65)
author:: [[王沛]]
full-title:: 16 | 按需加载：如何提升应用打开速度？ - React Hooks 核心原理与实战
category:: #articles
url:: https://time.geekbang.org/column/article/390121

- 在实际的项目中，使用 Service Worker 其实还有更多的考虑因素，比如何时删掉旧版本缓存，如何处理请求失败等等 #Highlight #[[2022-09-23]]
- 要使用 Service Worker，基本上分为注册、初始化、拦截请求等步骤 #Highlight #[[2022-09-23]]
- Service Worker 是一段独立于页面之外的 JavaScript 脚本，它并不在 Web 页面中运行，但是会在 Web 页面加载时，由一段代码去触发注册、下载和激活。一旦安装完成之后，Service Worker 就会拦截所有当前域名下的所有请求，由代码逻辑决定应该如何处理。 #Highlight #[[2022-09-23]]
- Service Worker 会拦截所有浏览器发送出来的请求，你可以通过代码去控制 Rest API 这些请求发送到服务器；而 JS、CSS 等静态资源，则通过 Cache Storage 存储在浏览器端。 #Highlight #[[2022-09-23]]
- 我们可以把 Service Worker 看作一种前端的资源请求代理。每一个前端页面发出的请求都会先由这个代理进行处理，然后你再决定请求是直接发送到服务器端，还是从本地的 Local Storage 读取内容返回。 #Highlight #[[2022-09-23]]
- 按需加载可以说是减少首屏加载时间最为有效的手段，它可以让用户在打开应用时，无需加载所有代码就能开始使用，从而提升用户体验。 #Highlight #[[2022-09-23]]
- react-lodable 本身是通过高阶组件来实现的，这个高阶组件实现了模块加载、loading 状态以及错误处理的功能。你只要通过它提供的简单 API，就可以很容易实现组件的动态加载 #Highlight #[[2022-09-23]]
- 在实际的项目开发中，我们一般都会直接使用 react-loadable 来完成按需加载，而不用自己去实现 #Highlight #[[2022-09-23]]
- 按业务模块为目标去做隔离，尽量在每个模块的起始页面去定义这个拆分点。 #Highlight #[[2022-09-23]]
- mport() 这个语句完全是由 Webpack 进行处理的。Webpack 会将以“./RealProfilePage”模块为起点的所有依赖模块，单独打成一个包。并且，Webpack 还会生成代码，用于按需加载这个模块。 #Highlight #[[2022-09-23]]
- 在应用加载的性能指标中，其中一个很重要的指标就是首屏打开速度。也就是说，当用户打开你的应用之后，他要花多久才能看到首页面。根据统计显示，如果首页打开时间超过 3 秒，那么就会流失掉 40% 的用户。所以这项指标的重要性不言而喻，也让我们在完成需求开发的同时，要时刻有意识地去控制包的大小。要知道，包越小，首屏打开速度就越快。 #Highlight #[[2022-09-23]]