- #CruelFundamental #2022-10-30 [讨论](https://github.com/CYZH1307/CruelFundamental/tree/main/homework/202210/30) #操作系统
-
- 缺页异常（Page Fault）是计算机操作系统中的一种中断或异常，当程序试图访问一个并未加载到物理内存中的虚拟内存页时，就会发生缺页异常。通常，这是由于所需的内存页被换出到辅助存储器（如硬盘）或者尚未分配的原因造成的。
-
- 缺页异常的触发情况：
	- 访问未分配的内存：当程序试图访问尚未分配或映射到物理内存的虚拟地址时，会触发缺页异常。
	- 访问被换出的内存：当程序访问的内存页由于内存管理策略（如 LRU）被换出到辅助存储器时，会触发缺页异常。
	- 访问受保护的内存：当程序试图访问受保护的内存页（如操作系统内核的内存），而没有相应的权限时，会触发缺页异常。
-
- 触发缺页异常后的处理过程
	- 中断程序执行：当发生缺页异常时，CPU 会中断当前正在执行的程序。
	- 保存现场：操作系统会保存导致缺页异常的指令及其上下文，以便在异常处理完毕后恢复程序的执行。
	- 查找内存页：操作系统会在页表中查找所需的虚拟内存页，以确定该页是否存在于辅助存储器（如硬盘）中。
	- 分配物理内存：如果找到了所需的内存页，操作系统会为其分配一个物理内存帧（frame）。
	- 从辅助存储器加载内存页：操作系统将所需的内存页从辅助存储器中加载到分配的物理内存帧中。
	- 更新页表：操作系统会更新页表，以反映虚拟内存页到物理内存帧的新映射关系。
	- 恢复程序执行：操作系统恢复之前保存的现场，让程序继续执行导致缺页异常的指令。