title:: Readwise/Highlights/ChatGPT æ˜¯é€å¥ç»™å‡ºç­”æ¡ˆçš„ï¼Œè€Œåœ¨å°† Str...
author:: [[@mr_easonyang on Twitter]]
full-title:: ChatGPT æ˜¯é€å¥ç»™å‡ºç­”æ¡ˆçš„ï¼Œè€Œåœ¨å°† Str...
category:: #tweets
url:: https://twitter.com/mr_easonyang/status/1632407953889447937
- ChatGPT æ˜¯é€å¥ç»™å‡ºç­”æ¡ˆçš„ï¼Œè€Œåœ¨å°† stream å‚æ•°è®¾ç½®ä¸º true å API ä¹Ÿå¯ä»¥å®ç°å’Œ ChatGPT ä¸€æ ·çš„æµå¼è¿”å›ï¼Œè¿›è€Œæ›´å¿«åœ°ç»™åˆ°ç”¨æˆ·åé¦ˆï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç¼“è§£è¿æ¥è¶…æ—¶ã€‚
  
  é‚£è¿™æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿä¸åŒäºæ›´å¸¸è§çš„ WebSocketï¼ŒOpenAI é€‰æ‹©äº†ä½¿ç”¨ Server-sent events æ¥å®ç° https://t.co/HeEqUBtpn0ğŸ§µğŸ‘‡ ([View Tweet](https://twitter.com/mr_easonyang/status/1632407953889447937)) #Highlight #[[2023-03-06]]
- Server-sent events ä¸ WebSocket ä¸»è¦æœ‰ä¸¤å¤§ä¸åŒï¼š
  
  é¦–å…ˆå‰è€…åœ¨å»ºè¿ååªèƒ½ç”±æœåŠ¡ç«¯å•å‘å‘é€æ•°æ®è‡³å®¢æˆ·ç«¯ï¼Œè€Œåè€…æ˜¯å¯ä»¥åŒå‘é€šä¿¡çš„ï¼›
  
  å…¶æ¬¡å‰è€…ä»ç„¶æ˜¯åŸºäº HTTP åè®®ï¼Œè€Œåè€…åœ¨ä¸é™çº§çš„æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯åŸºäº TCP çš„ WS åè®®ã€‚
  
  æˆ‘è§‰å¾—æœ¬è´¨ä¸Š SSE æ˜¯å¯¹ä¼ ç»Ÿé•¿è½®è¯¢çš„ä¼˜åŒ–ã€‚ğŸ‘‡ ([View Tweet](https://twitter.com/mr_easonyang/status/1632407956443774977)) #Highlight #[[2023-03-06]]
- SSE çš„æµç¨‹å…¶å®å¾ˆç®€å•ï¼Œç®€åŒ–è€Œè¨€ï¼š
  
  é¦–å…ˆæ˜¯å®¢æˆ·ç«¯è¯·æ±‚æ—¶æŒ‡å®š Accept: text/event-stream header åšæ¡æ‰‹åŠ¨ä½œï¼ŒæœåŠ¡ç«¯æ”¶åˆ°åå›å¤ Content-Type: text/event-stream å’Œ Transfer-Encoding: chunked ä¸¤ä¸ª header å³å®Œæˆè®¢é˜…ã€‚
  
  éšåæœåŠ¡ç«¯ä¿æŒåŒä¸€è¿æ¥ï¼Œä»¥ data: å¼€å¤´ã€\n\n ç»“å°¾é€æ­¥å‘é€æ•°æ®ã€‚ğŸ‘‡ ([View Tweet](https://twitter.com/mr_easonyang/status/1632407958876479488)) #Highlight #[[2023-03-06]]
- å¯¹äºè¿æ¥ä¿æ´»ï¼Œåˆ™è¿˜æ˜¯ç»å…¸çš„ç”±æœåŠ¡ç«¯å‘é€ç©ºåŒ…æˆ–çº¦å®šå¥½çš„ç‰¹å®šæ— æ„ä¹‰æ•°æ®åšä¸º ping åŠ¨ä½œã€‚
  
  å¯¹äºè¿æ¥æ–­å¼€ï¼Œé€šå¸¸å®¢æˆ·ç«¯ä¼šå°è¯•é‡è¿ï¼ŒæœåŠ¡ç«¯ä¹Ÿå¯ä»¥é€šè¿‡å‘å®¢æˆ·ç«¯å‘é€ retry å‘½ä»¤æ¥æŒ‡å®šé‡è¿å°è¯•å‘¨æœŸã€‚æ­¤å¤–ï¼ŒæœåŠ¡ç«¯è¿˜å¯ä»¥é€‰æ‹©ç»´æŠ¤ä¸€ä¸ª Last-Event-ID å­—æ®µï¼Œè®©å®¢æˆ·ç«¯é‡è¿æ—¶å¸¦ä¸Šï¼Œè¿™æ ·å°±å¯ä»¥åšåˆ°æ¶ˆæ¯ç»­ä¼ äº†ã€‚ğŸ‘‡ ([View Tweet](https://twitter.com/mr_easonyang/status/1632407961330126848)) #Highlight #[[2023-03-06]]
- ä»¥ä¸Šå°±æ˜¯ SSE çš„ä¸»è¦äº¤äº’æµç¨‹äº†ï¼Œç›¸æ¯”èµ·éœ€è¦å¤„ç†ä¼—å¤šè¾¹ç•Œåœºæ™¯çš„ WS ï¼Œä»–è¶³ä»¥è¢«ç§°ä¸ºè½»é‡çº§æ–¹æ¡ˆã€‚ä¸è¿‡åŸºäº HTTP ä¹Ÿå°±æ„å‘³ç€å¯é æ€§ä¼šä¸å¦‚ WS è¿™ç§å®šå‘è®¾è®¡çš„åº”ç”¨åè®®ï¼Œè€Œå•å‘ä¼ è¾“ä¹Ÿé™å®šäº†å…¶ä½¿ç”¨åœºæ™¯å’Œæ‰©å±•æ€§ã€‚
  
  è¿™é‡Œæœ‰ä¸€ä»½æ›´åå‘åè®®è§£é‡Šçš„åŸå§‹æ ‡å‡†æ–‡æ¡£ï¼Œå¯ä»¥è¡¥å……é˜…è¯» https://t.co/VoASaRg6M5 (the end) ([View Tweet](https://twitter.com/mr_easonyang/status/1632407963695738881)) #Highlight #[[2023-03-06]]