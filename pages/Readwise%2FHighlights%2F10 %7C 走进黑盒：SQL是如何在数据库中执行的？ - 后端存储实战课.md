title:: Readwise/Highlights/10 | 走进黑盒：SQL是如何在数据库中执行的？ - 后端存储实战课
author:: [[李玥]]
full-title:: 10 | 走进黑盒：SQL是如何在数据库中执行的？ - 后端存储实战课
category:: #articles
url:: https://time.geekbang.org/column/article/213176

- 有的时候明明有索引却不能命中的原因是，数据库在对物理执行计划优化的时候，评估发现不走索引，直接全表扫描是更优的选择。 #Highlight #[[2022-08-06]]
- 什么主键不能太长，因为表的每个索引保存的都是主键的值，过长的主键会导致每一个索引都很大。 #Highlight #[[2022-08-06]]
- 如果通过索引来检索一条记录，需要先后查询索引树和数据树这两棵树：先在索引树中检索到行记录的主键值，然后再用主键值去数据树中去查找这一行数据。 #Highlight #[[2022-08-06]]
- 在 InnoDB 中，表的索引也是以 B+ 树的方式来存储的，和存储数据的 B+ 树的区别是，在索引树中，叶子节点保存的不是行数据，而是行的主键值。 #Highlight #[[2022-08-06]]
- 如何对执行计划进行优化，不同的数据库有不同的优化方法，这一块儿也是不同数据库性能有差距的主要原因之一。优化的总体思路是，在执行计划中，尽早地减少必须处理的数据量。也就是说，尽量在执行计划的最内层减少需要处理的数据量。 #Highlight #[[2022-08-06]]
- 数据库的服务端，可以划分为执行器 (Execution Engine) 和 存储引擎 (Storage Engine) 两部分。执行器负责解析 SQL 执行查询，存储引擎负责保存数据。 #Highlight #[[2022-08-06]]
- 尽量不要在 WEHER 条件中，对列做计算 #Highlight #[[2022-08-06]]