title:: Readwise/Highlights/22 | 缓存架构：如何减少不必要的计算？ - 后端技术面试 38 讲
author:: [[李智慧]]
full-title:: 22 | 缓存架构：如何减少不必要的计算？ - 后端技术面试 38 讲
category:: #articles
url:: https://time.geekbang.org/column/article/188667

- 旁路（cache-aside）缓存，应用程序访问旁路缓存获取数据的时候，如果旁路缓存中有应用程序需要的数据，那么就返回这个数据；如果没有，就返回空（null）。应用程序需要自己从数据源读取数据，然后将这个数据写入到旁路缓存中。这样，下次应用程序需要数据的时候，就可以通过旁路缓存直接获得数据了。 #Highlight #[[2022-08-04]]
- 通读（read-through）缓存，应用程序访问通读缓存获取数据的时候，如果通读缓存有应用程序需要的数据，那么就返回这个数据；如果没有，那么通读缓存就自己负责访问数据源，从数据源获取数据返回给应用程序，并将这个数据缓存在自己的缓存中。这样，下次应用程序需要数据的时候，就可以通过通读缓存直接获得数据了。 #Highlight #[[2022-08-04]]
- 一般说来，缓存可以分成两种，通读缓存和旁路缓存。 #Highlight #[[2022-08-04]]
- 数据脏读的问题，缓存的数据来自数据源，如果数据源中的数据被修改了，那么缓存中的数据就变成脏数据了。 #Highlight #[[2022-08-04]]
- 使用缓存可以减少不必要的计算，能够带来三个方面的好处：
  缓存的数据通常存储在内存中，距离使用数据的应用也更近一点，因此相比从硬盘上获取，或者从远程网络上获取，它获取数据的速度更快一点，响应时间更快，性能表现更好。
  缓存的数据通常是计算结果数据，比如对象缓存中，通常存放经过计算加工的结果对象，如果缓存不命中，那么就需要从数据库中获取原始数据，然后进行计算加工才能得到结果对象，因此使用缓存可以减少 CPU 的计算消耗，节省计算资源，同样也加快了处理的速度。
  通过对象缓存获取数据，可以降低数据库的负载压力；通过 CDN、反向代理等通读缓存获取数据，可以降低服务器的负载压力。这些被释放出来的计算资源，可以提供给其他更有需要的计算场景，比如写数据的场景，间接提高整个系统的处理能力。 #Highlight #[[2022-08-04]]
- 应用程序调用 API，API 调用 SDK 的路由算法，路由算法根据缓存的 key 值，计算这个 key 应该访问哪台 Memcached 服务器，计算得到服务器的 IP 地址和端口号后，API 再调用 SDK 的通信模块，将 <key, value> 值以及缓存操作命令发送给具体的某台 Memcached 服务器，由这台服务器完成缓存操作。 #Highlight #[[2022-08-04]]
- 分布式缓存是指将一组服务器构成一个缓存集群，共同对外提供缓存服务 #Highlight #[[2022-08-04]]
- 应用程序在代码中主要使用的是对象缓存，对象缓存是一种旁路缓存。 #Highlight #[[2022-08-04]]
- 互联网应用中主要使用的通读缓存是 CDN 和反向代理缓存。 #Highlight #[[2022-08-04]]