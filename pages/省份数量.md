alias:: 朋友圈问题

- #Algorithm #Leetcode [Leetcode-547](https://leetcode-cn.com/problems/number-of-provinces/) #Medium #[[并查集]]
-
- ## 思路
	- 非常标准的并查集问题，并且可以利用数组来简化问题
		- 无需 nodes map
		- parents map 和 sizes map 直接使用 int array 代替，key 相当于 index
			- 因为 sizes map 使用数组代替了，因此没有办法删除，因此额外增加一个变量 sets 存储当前有多少个独立集合
		- 增加一个 help 数组用来在 getFinal 过程中替换掉栈
-
- ## 答案（Java）
	- ```java
	  class Solution {
	      public static class UnionFind {
	          private final int[] parents;
	          private final int[] sizes;
	          private final int[] help;
	          private int sets;
	  
	          UnionFind(int length) {
	              parents = new int[length];
	              sizes = new int[length];
	              help = new int[length];
	              sets = length;
	  
	              for (int i = 0; i < length; i++) {
	                  parents[i] = i;
	                  sizes[i] = 1;
	              }
	          }
	  
	          private int getFinal(int c) {
	              int parent;
	              int i = 0;
	              while ((parent = parents[c]) != c) {
	                  help[i++] = c;
	                  c = parent;
	              }
	              for (i = i - 1; i >= 0; i--) {
	                  parents[help[i]] = parent;
	              }
	  
	              return parent;
	          }
	  
	          public void union(int x, int y) {
	              int xFinal = getFinal(x);
	              int yFinal = getFinal(y);
	  
	              if (xFinal == yFinal) return;
	  
	              int xSize = sizes[x];
	              int ySize = sizes[y];
	              int bigger, smaller;
	              if (xSize > ySize) {
	                  bigger = xFinal;
	                  smaller = yFinal;
	              } else {
	                  bigger = yFinal;
	                  smaller = xFinal;
	              }
	  
	              parents[smaller] = bigger;
	              sizes[bigger] = xSize + ySize;
	              sets--;
	          }
	  
	          public boolean isSameSet(int x, int y) {
	              int xFinal = getFinal(x);
	              int yFinal = getFinal(y);
	  
	              return xFinal == yFinal;
	          }
	  
	          public int sizes() {
	              return sets;
	          }
	      }
	  
	      public int findCircleNum(int[][] isConnected) {
	          UnionFind sets = new UnionFind(isConnected.length);
	  
	          for (int i = 0; i < isConnected.length; i++) {
	              for (int j = i + 1; j < isConnected.length; j++) {
	                  if (isConnected[i][j] == 1) sets.union(i, j);
	              }
	          }
	  
	          return sets.sizes();
	      }
	  }
	  ```
	- [正确性证明](https://leetcode.com/submissions/detail/633008238/)
-
- ## 答案（Go）