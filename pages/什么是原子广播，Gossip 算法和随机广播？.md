- #CruelFundamental #[[2022-08-25]] [讨论](https://github.com/CYZH1307/CruelFundamental/tree/main/homework/202208/25) #分布式 #ZooKeeper
-
- 原子广播协议是 [[ZooKeeper]] 使用的协议
	- [[Paxos]] 算法有点过于复杂、实现难度也比较高，所以 ZooKeeper 在编程实现的时候将其简化成了一种叫做 [[ZAB]] 的算法（Zookeeper Atomic Broadcast， Zookeeper 原子广播）。
	- ZAB 算法的目的，同样是在多台服务器之间达成一致，保证这些服务器上存储的数据是一致的。
	- ZAB 算法的主要特点在于：**需要在这些服务器中选举一个 Leader**（与之相比，Paxos 是没有 leader 的），**所有的写请求都必须提交给 Leader**。由 Leader 服务器向其他服务器（Follower）发起 Propose，通知所有服务器：我们要完成一个写操作请求，大家检查自己的数据状态，是否有问题。
	- ![Replaced by Image Uploader](https://vip2.loli.io/2022/08/25/VPuzpWXig2vrsBJ.png)
	- 如果所有 Follower 服务器都回复 Leader 服务器 ACK，即没有问题，那么 Leader 服务器会向所有 Follower 发送 Commit 命令，要求所有服务器完成写操作。这样包括 Leader 服务器在内的所有 ZooKeeper 集群服务器的数据，就都更新并保持一致了。如果有两个客户端程序同时请求修改同一个数据，因为必须要经过 Leader 的审核，而 Leader 只接受其中一个请求，数据也会保持一致。
- Gossip 算法