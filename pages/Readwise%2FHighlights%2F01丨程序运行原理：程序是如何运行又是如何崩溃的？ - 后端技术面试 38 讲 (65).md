title:: Readwise/Highlights/01丨程序运行原理：程序是如何运行又是如何崩溃的？ - 后端技术面试 38 讲 (65)
author:: [[李智慧]]
full-title:: 01丨程序运行原理：程序是如何运行又是如何崩溃的？ - 后端技术面试 38 讲
category:: #articles
url:: https://time.geekbang.org/column/article/166581

- 多个线程访问共享资源的这段代码被称为临界区，解决线程安全问题的主要方法是使用锁，将临界区的代码加锁，只有获得锁的线程才能执行临界区代码 #Highlight #[[2022-08-01]]
- 当某些代码修改内存堆里的数据的时候，如果有多个线程在同时执行，就可能会出现同时修改数据的情况，比如，两个线程同时对一个堆中的数据执行 +1 操作，最终这个数据只会被加一次，这就是人们常说的线程安全问题 #Highlight #[[2022-08-01]]
- 线程从逻辑上看，是同时在运行的，每个线程有自己的线程栈，所有的线程栈都是完全隔离的，也就是每个方法的参数和方法内的局部变量都是隔离的，一个线程无法访问到其他线程的栈内数据。 #Highlight #[[2022-08-01]]
- CPU 以线程为单位进行分时共享执行 #Highlight #[[2022-08-01]]
- 真正执行的函数永远都在栈顶。而且因为栈帧是隔离的，所以不同函数可以定义相同的变量而不会发生混乱。 #Highlight #[[2022-08-01]]
- 每次函数调用，操作系统都会在栈中创建一个栈帧（stack frame）。正在执行的函数参数、局部变量、申请的内存地址等都在当前栈帧中，也就是堆栈的顶部栈帧中。 #Highlight #[[2022-08-01]]
- 堆是一块无序的内存空间，任何时候进程需要申请内存，都会从堆空间中分配，分配到的内存地址则记录在栈中。 #Highlight #[[2022-08-01]]
- 进程除了包含可执行的程序代码，还包括进程在运行期使用的内存堆空间、栈空间、供操作系统管理用的数据结构。 #Highlight #[[2022-08-01]]