- #CruelFundamental #2022-10-27 [讨论](https://github.com/CYZH1307/CruelFundamental/tree/main/homework/202210/27) #数据库 #MySQL
-
- 幻读（Phantom Read）和脏读（Dirty Read）是数据库事务过程中可能遇到的两种不一致现象
	- 脏读是指一个事务读取到了另一个尚未提交的事务所修改的数据。这可能导致不一致的数据，因为这些修改在未来可能会被回滚。
	- 幻读是指在一个事务的执行过程中，由于另一个并发事务的提交，导致原本的事务读取到了一些额外的行（即幻影行）。幻读是由于新增或删除记录造成的数据不一致，与脏读不同，幻读并不涉及未提交的数据。
- 避免幻读
	- 幻读可以通过使用更高的隔离级别来避免。在 SQL 标准中，有四种事务隔离级别，从低到高依次为：读未提交（Read Uncommitted）、读已提交（Read Committed）、可重复读（Repeatable Read）和串行化（Serializable）。
	- 使用串行化（Serializable）隔离级别可以避免幻读。在串行化隔离级别下，事务是顺序执行的，而不是并发执行。这意味着在一个事务执行期间，不会有其他事务同时修改数据。这样可以确保一个事务在执行过程中看到的数据是一致的，从而避免了幻读。
- 实现事务串行化
	- 悲观锁（Pessimistic Locking）：悲观锁是一种策略，假定事务在执行过程中可能会发生冲突。因此，在事务处理过程中，会对涉及的数据行进行加锁，阻止其他事务对这些数据行的并发访问。当一个事务完成并释放锁后，其他事务才能继续访问这些数据行。
	- 乐观锁（Optimistic Locking）：乐观锁是另一种策略，假定事务在执行过程中不太可能发生冲突。事务在开始时不会锁定数据行，而是在提交事务时检查是否有其他事务对相关数据行进行了修改。如果有冲突，事务会回滚并重新执行。乐观锁适用于冲突较少的场景