title:: Readwise/Highlights/05｜指令架构：RISC-V到底在CPU设计上有哪些优势？ - 计算机基础实战课
author:: [[彭东]]
full-title:: 05｜指令架构：RISC-V到底在CPU设计上有哪些优势？ - 计算机基础实战课
category:: #articles
url:: https://time.geekbang.org/column/article/546957
- 由于访问寄存器中的数据要比访问存储器的速度快得多，一般每条 RISC-V 指令最多用一个时钟周期执行（忽略缓存未命中的情况），而 ARM-32 或者 x86-32 则需要多个时钟周期执行的指令。因为 ARM-32 只有 16 个寄存器，而 X86-32 仅仅只有 8 个寄存器。 #Highlight #[[2022-08-05]]
- 我们如果需要插入一个空操作，就可以使用汇编语句 “addi  x0 , x0, 0 ”（相当于 0+0=0）来代替其他指令集中的 nop 空指令。 #Highlight #[[2022-08-05]]
- RISC-V 的一个指令中可以提供三个寄存器操作数，而不是像 x86 一样，让源操作数和目的操作数共享一个字段，因此相比 x86 指令，RISC-V 减少了软件的程序操作。 #Highlight #[[2022-08-05]]
- RV32I 包含的指令是固定的，永远不会改变。这为编译器设计人员，操作系统开发人员和汇编语言程序员提供了稳定的基础知识框架。 #Highlight #[[2022-08-05]]
- 指令集架构（英文叫 Instruction Set Architecture，缩写为 ISA）是软件和硬件的接口，不同的应用需求，会有不同的指令架构。我们要想设计一款 CPU，指令集体系就是设计的出发点。 #Highlight #[[2022-08-05]]
- 指令集可以说是一个 CPU 的基石，要实现 CPU 的计算和控制功能，就必须要定义好一系列与硬件电路相匹配的指令系统。所以，在设计 CPU 之初，工程师就应该清楚 CPU 应该具有怎样的指令架构。 #Highlight #[[2022-08-05]]
- RISC-V 遵循的是大道至简的原则，它的指令数目非常简洁，基本指令只有 40 多条，而分支跳转指令只有 8 条，其中 6 条是带条件跳转指令，2 条是无条件跳转指令。这些指令条数的减少，使硬件设计更简单。 #Highlight #[[2022-08-05]]
- 在 RISC-V 的规范里，定义了 32 个通用寄存器。其中有 31 个常规寄存器，一个恒 0 值的 x0 寄存器。由于 RISV 的寄存器有数量上的优势，使得基于 RISC-V 设计 CPU 不用那么频繁地去访问存储器，指令执行起来更快，也让编译器和汇编程序员的工作更加轻松。 #Highlight #[[2022-08-05]]
- RISC-V 仅有 6 种指令格式，它们分别是：R 类型指令、 I 型指令、 S 型指令、B 类型指令、 U 型指令和 J 型指令。这些指令格式规整有序，结构简单，所以指令解码起来比较简单，有利于简化解码电路，提高了 CPU 的性能功耗比。 #Highlight #[[2022-08-05]]
- 除了内存地址空间和通用寄存器地址空间外，RISC-V 中还定义了一个独立的控制与状态寄存器（Control Status Register，CSR）地址空间。 #Highlight #[[2022-08-05]]
- 因为没有了复杂的内存寻址方式，这让 CPU 流水线可以对数据冲突提前做出判断，并通过流水线各级之间的转送加以处理，而不需要插入空操作（NOP），极大提高了代码的执行效率。 #Highlight #[[2022-08-05]]
- 与 CISC 指令集具有众多的寻址方式不同，RV32I 省略了像 x86-32 指令集那样的复杂寻址模式。在 RISC-V 指令集中，对内存的读写只能通过 LOAD 指令和 STORE 指令实现。而其他的指令，都只能以寄存器为操作对象。 #Highlight #[[2022-08-05]]