title:: Readwise/Highlights/06 | 静态链接：变量与内存地址是如何映射的？ - 编程高手必学的内存知识
author:: [[海纳]]
full-title:: 06 | 静态链接：变量与内存地址是如何映射的？ - 编程高手必学的内存知识
category:: #articles
url:: https://time.geekbang.org/column/article/436308

- 一般来说，重定位表的名字都是以.rela 开头，比如.rela.text 就是对.text 段的重定位表，.rela.data 是对.data 段的重定位表 #Highlight #[[2023-05-07]]
- 从 section-header 的信息里可以看到，.rela.text 段的类型是 RELA 类型，也就是重定位表。我们在前面讲到，链接器在处理目标文件的时候，需要对目标文件里代码段和数据段引用到的符号进行重定位，而这些重定位的信息都记录在对应的重定位表里。 #Highlight #[[2023-05-07]]
- 即便链接的过程中会对不同.o 文件中的代码段进行合并，但是同一个.o 文件内部不同函数之间的位置也会保持不变，因此，我们在编译的时候，就能确定对静态函数调用的偏移 #Highlight #[[2023-05-07]]
- 链接器需要对编译器生成的多个目标（.o) 文件进行合并，一般采取的策略是相似段的合并，最终生成共享文件 (.so) 或者可执行文件 #Highlight #[[2023-05-07]]
- gcc 会默认打开 pie 模式，也就意味着系统 loader 对加载可执行文件时的起始地址，会随机加载。关闭 pie 之后，在 Linux 64 位的系统下，默认的加载起始地址是 0x400000 #Highlight #[[2023-05-07]]